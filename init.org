# -*- org -*-
#+TITLE: init.org
#+STARTUP: overview
#+PROPERTY: header-args:emacs-lisp :tangle init.el
#+PROPERTY: header-args            :results silent

* ã“ã‚Œã¯ãªã«ï¼Ÿ
** ä½¿ã„æ–¹
  - æ—¥æœ¬ã®Emacsãƒ¦ãƒ¼ã‚¶å‘ã‘ï¼
  - Emacsã‚’è¨­å®šã™ã‚‹ãŸã‚ã®elã§ã™ï¼
    - [[https://github.com/ychubachi/.emacs.d/blob/master/init.org][.emacs.d/init.org at master Â· ychubachi/.emacs.d]]
  - preludeã‚’æ„è­˜ã—ã¦ã„ã¾ã™
    - [[http://batsov.com/prelude/][Prelude by bbatsov]]
  - ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ å€™è£œ
    - aperitif é£Ÿå‰é…’
  - oh-my-zshã®ã‚ˆã†ãªplugins
    - [[https://github.com/robbyrussell/oh-my-zsh][robbyrussell/oh-my-zsh]]
  - C-c C-v t ã§init.elã‚’ç”Ÿæˆ
    - [[http://orgmode.org/manual/Header-arguments-in-Org-mode-properties.html#Header-arguments-in-Org-mode-properties][Header arguments in Org mode properties - The Org Manual]]
  - daemonã«ã¤ã„ã¦
  - å¯¾å¿œã™ã‚‹Emacsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯24.3ï¼ˆ2013-03-11å…¬é–‹ç‰ˆï¼‰ä»¥é™ã§ã™ï¼
    - [[http://www.gnu.org/software/emacs/][GNU Emacs - GNU Project - Free Software Foundation (FSF)]]
    - [[http://www.gnu.org/software/emacs/news/NEWS.24.3]]
    - [[http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html][Lexical Binding - GNU Emacs Lisp Reference Manual]]
    - [[http://www.gnu.org/software/emacs/manual/html_node/elisp/Closures.html#Closures][Closures - GNU Emacs Lisp Reference Manual]]

  - init.elã«ã¤ã„ã¦
    - [[http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html#Init-File][Init File - GNU Emacs Manual]]
    - [[http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-Syntax.html#Init-Syntax][Init Syntax - GNU Emacs Manual]]
      - init fileã®æ–‡æ³•ï¼
      - ç‰¹å®šã®å¤‰æ•°ã¯è‡ªå‹•çš„ã«buffer localã«ãªã‚‹ï¼
	- ã“ã®å ´åˆã¯set-defaultã‚’ä½¿ã†ã“ã¨ï¼

** ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  - custom.elã‚’æœ€å¾Œã«èª­ã‚€ã®ã§ï¼Œã“ã“ã§ã®è¨­å®šã‚’ä¸Šæ›¸ãã§ãã¾ã™ï¼
  - custom.elã¯gitã§ã¯ignoreã—ã¾ã™ï¼
  - Dropboxã¨é€£æºã—ãŸorg-modeã¨MobileOrgã®ãŸã‚ã®è¨­å®š
  - [[http://d.hatena.ne.jp/a_bicky/20131230/1388396559][custom-set-variables ã¯ä½¿ã‚ãªã„æ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ - ã‚ã‚‰ã³ãæ—¥è¨˜]]
** æº–å‚™
*** git submodule
  - git submodule init
  - git submodule update
*** ãƒ•ã‚©ãƒ³ãƒˆ
  - Ricty ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
*** aspell ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - git-commit-mode-hook ã§flyspellãŒè‡ªå‹•çš„ã«onã«ãªã‚‹ï¼
  - .aspell.conf ã®è¨­å®š
    - [[http://sky-y.hatenablog.jp/entry/20091229/1262106336][YaTeX + aspell - é›²è¡Œããã‚‰ã‚†ãã‚³ã‚³ãƒ­ã‚¤ã‚­]]

  Error enabling Flyspell mode:
  (Error: No word lists can be found for the language "ja_JP".)

** TODOs
*** TODO custem-sample.elã‚’ä½œã‚‹
   :PROPERTIES:
   :ID:       82dac097-153d-4efc-88eb-ac6616df3b5a
   :END:
   - ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã‘ã‚Œã°ã‚³ãƒ”ãƒ¼ã™ã‚‹
     - ãã®éš›ï¼Œå•ã„åˆã‚ã›ã‚’ã™ã‚‹
*** TODO custom.elã«ã‚ã‚‹è¨­å®šã‚’ã“ã¡ã‚‰ã«ç§»ã™ï¼ˆcustom.elãªã—ã§ã‚‚okã«ã™ã‚‹ï¼‰
    :PROPERTIES:
    :ID:       5aad65c8-d606-4d34-808d-9afaa5e638c0
    :END:
*** TODO org-insert-heading-respect-contentã‚’C-jã«ã™ã‚‹
    :PROPERTIES:
    :ID:       f9593ce6-203d-47a7-9342-fd602c193a0c
    :END:
    C-jã¯org-return-indentã«ãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œã¦ã„ã‚‹
*** TODO [[http://www.emacswiki.org/emacs/UnitTesting][EmacsWiki: Unit Testing]]
    :PROPERTIES:
    :ID:       5cb66ace-65c3-4e01-9c1c-f25ae7008668
    :END:
*** TODO [[https://github.com/purcell/exec-path-from-shell][purcell/exec-path-from-shell]]
    :PROPERTIES:
    :ID:       cd8617f9-5634-467f-9c14-ca657a802726
    :END:
*** TODO flyspell-modeã§C-.ãŒã‹ã¡ã‚ã†
    :PROPERTIES:
    :ID:       7af985a9-1630-4e8a-8202-3d434351c518
    :END:
*** TODO [[http://shibayu36.hatenablog.com/entry/2012/12/29/001418][å¹´æœ«emacsè¨­å®šå¤§æƒé™¤ã‚’ã—ã¦ã€ã“ã‚Œã¯æ¨ã¦ã‚‰ã‚Œãªã„ã¨æ€ã£ãŸè¨­å®šæ›¸ã„ã¦ã - $shibayu36->blog;]]
    :PROPERTIES:
    :ID:       e010dd60-ee65-4042-9b16-9ae0f2681837
    :END:
*** TODO Qiitaã«æŠ•ç¨¿ã§ããªã„ã‹
    :PROPERTIES:
    :ID:       7cd92222-91c7-4c46-9325-85e891c20216
    :END:
*** TODO org-modeã§å€™è£œã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã«ã§ããªã„ã‹
    :PROPERTIES:
    :ID:       0d60c33f-5d9b-4447-bf76-8344bf44471c
    :END:
*** TODO F1ã¯sshæ™‚ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¨ã‹ã¶ã‚‹
*** TODO [[http://www.fan.gr.jp/~ring/doc/elisp_19/elisp-jp_39.html][GNU Emacs Lispãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«: A. ãƒ’ãƒ³ãƒˆã¨æ¨™æº–çš„ãªä½œæ³•]]
* å‰å‡¦ç†
** ãƒ˜ãƒƒãƒ€ã‚³ãƒ¡ãƒ³ãƒˆ

#+begin_src emacs-lisp :padline no
;; init.el --- Emacsã®åˆæœŸè¨­å®š
#+end_src

** é–‹å§‹ã®é€šçŸ¥

#+begin_src emacs-lisp
 (message "%s" "%% Emacsã®è¨­å®šã‚’é–‹å§‹ã—ã¾ã™ %%")
#+end_src

** å®Œäº†ã®é€šçŸ¥
*** after-init-hookã®è¨­å®š
  - after-init-hookã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ãŸã‚‰å‘¼ã°ã‚Œã‚‹ãƒ•ãƒƒã‚¯ã§ã™ï¼
    - [[http://www.gnu.org/software/emacs/manual/html_node/elisp/Init-File.html#Init-File][Init File - GNU Emacs Lisp Reference Manual]]

*** ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®æŒ‡å®š
  - æ¦‚è¦
     - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ï¼Œèª­ã¿è¾¼ã¿ã¾ã™ï¼
       - custom.elã«ã¯å€‹äººç”¨ã®è¨­å®šã‚’æ›¸ã
     - ã“ã®ã‚³ãƒ¼ãƒ‰ã§è¨­å®šã—ãŸå€¤ã¯ï¼Œcustom.elå†…ã§ä¸Šæ›¸ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼
     - after-init-hookã§custom.elã‚’èª­ã¿ã“ã¾ã›ã‚‹ç†ç”±
       - init.elã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ç¢ºå®Ÿã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã™ï¼
  - å‚è€ƒ
     - [[http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Customizations.html][Saving Customizations - GNU Emacs Manual]]

#+begin_src emacs-lisp
    (add-hook 'after-init-hook
	      (lambda ()
		(setq custom-file "~/.emacs.d/custom.el")
		(if (file-exists-p (expand-file-name custom-file))
		    (load (expand-file-name custom-file)))
		(message "%s" "%% custom.elã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ %%")))
#+end_src

#+RESULTS:
| x-wm-set-size-hint | init-loader-show-log | (lambda nil (message %% Emacsã®è¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸ %%)) |

** ã‚µãƒ¼ãƒãƒ¼èµ·å‹•

- Emacs serverã®é–‹å§‹
- Emacs æ—¢ã«èµ·å‹•ã—ã¦ã„ã‚‹å ´åˆã¯ç«‹ã¡ä¸Šã’ãªã„
  - [[http://stackoverflow.com/questions/5570451/how-to-start-emacs-server-only-if-it-is-not-started][configuration - How to start emacs server only if it is not started? - Stack Overflow]]

#+begin_src emacs-lisp
  (load "server")
  (unless (server-running-p)
    (server-start))
#+end_src

* Emacsæœ¬ä½“ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã®è¨­å®š
  - å¤–éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ãªã„ï¼Œæ¨™æº–çš„ãªè¨­å®šã‚’è¡Œã„ã¾ã™ï¼
** ãƒ­ãƒ¼ãƒ‰ãƒ‘ã‚¹ã®è¨­å®š

- normal-top-level-add-subdirs-to-load-path ã¯
  default-directory ã®å…¨ã¦ã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ load-path ã«è¿½åŠ ã™ã‚‹
  é–¢æ•°ã§ã™ï¼

- gitã®submoduleã¨ã—ã¦ç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (let ((default-directory "~/.emacs.d/git/"))
    (normal-top-level-add-subdirs-to-load-path))
#+end_src

- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¦ç®¡ç†ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (let ((default-directory "~/.emacs.d/site-lisp/"))
    (normal-top-level-add-subdirs-to-load-path))
#+end_src

** ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿å­˜å ´æ‰€ã®è¨­å®š                                      :files.el:
- å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’~/.emacs.d/data/backup/ä»¥ä¸‹ã«ä¿å­˜ã—ã¾ã™ï¼
- ã“ã®é …ç›®ã¯custom.elã§ã‚‚è¨­å®šå¯èƒ½ï¼

#+begin_src emacs-lisp
  (setq auto-save-file-name-transforms
	(quote ((".*" "~/.emacs.d/data/backup/" t))))
  (setq backup-directory-alist
	(quote (("\\.*$" . "~/.emacs.d/data/backup"))))
#+end_src

#+RESULTS:
: ~/.emacs.d/data/bookmarks

** ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¿å­˜å ´æ‰€ã®è¨­å®š					:bookmark.el:

- [[http://www.geocities.co.jp/SiliconValley-Bay/9285/EMACS-JA/emacs_74.html][GNU Emacsãƒãƒ‹ãƒ¥ã‚¢ãƒ«: Bookmarks]]
- [[http://maruta.be/intfloat_staff/53][Emacs ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç´ æ—©ãé–‹ã(ãã®1) ï½ bookmark, filecache ï½ | ã‚¤ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ãƒˆ ã‚¹ã‚¿ãƒƒãƒ•ãƒ–ãƒ­ã‚°]]

#+begin_src emacs-lisp
  (setq bookmark-default-file
	"~/.emacs.d/data/bookmarks")
#+end_src

** ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å†èª­ã¿è¾¼ã¿                                   :autorevert.el:
   Emacsã®å¤–ã§ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚ŒãŸã‚‰ï¼Œè‡ªå‹•çš„ã«ãƒãƒƒãƒ•ã‚¡ã‚’å†èª­è¾¼ã™ã‚‹ï¼

#+begin_src emacs-lisp
  (global-auto-revert-mode 1)
#+end_src

** ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ¼ãƒ³                                      :startup.el:

#+begin_src emacs-lisp
  (setq inhibit-startup-screen t)
#+end_src

** è‡ªå‹•ä¿å­˜                                                      :startup.el:

#+begin_src emacs-lisp
  (setq auto-save-list-file-prefix
	"~/data/auto-save-list/.saves-")
#+end_src

** ã‚«ãƒƒã‚³ã®å¯¾å¿œã‚’è¡¨ç¤º                                              :paren.el:

#+begin_src emacs-lisp
  (show-paren-mode 1)
#+end_src

#+RESULTS:
: t

** ä¸è¦ãªè¡Œæœ«ã®ç©ºç™½ã‚’å‰Šé™¤                                     :whitespace.el:

- ä¿å­˜ã™ã‚‹å‰ã«ï¼Œä¸è¦ãªç©ºç™½ã‚’å–ã‚Šé™¤ãã¾ã™ï¼
- å‚è€ƒ
  - [[http://batsov.com/articles/2011/11/25/emacs-tip-number-3-whitespace-cleanup/][Emacs Tip #3: Whitespace Cleanup - (think)]]
  - [[http://qiita.com/itiut@github/items/4d74da2412a29ef59c3a][Emacs - whitespace-modeã‚’ä½¿ã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜æ™‚ã«è¡Œæœ«ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚„æœ«å°¾ã®æ”¹è¡Œã‚’å‰Šé™¤ã™ã‚‹ - Qiita]]

#+begin_src emacs-lisp
  (add-hook 'before-save-hook
   'whitespace-cleanup)
#+end_src

#+RESULTS:
| auto-cleanup |

** ãƒ•ãƒ¬ãƒ¼ãƒ ã®è¡¨é¡Œ                                                         :C:

| å¤‰æ•°å          | å†…å®¹                         |
|-----------------+------------------------------|
| menu-bar-mode   | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã®è¡¨ç¤º           |
| tool-bar-mode   | ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤º             |
| scroll-bar-mode | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®è¡¨ç¤ºï¼ˆä½ç½®ï¼‰ |

#+begin_src emacs-lisp
  (setq frame-title-format
	(format "%%f - Emacs@%s" (system-name)))
#+end_src

** è¡Œç•ªå·ãƒ»åˆ—ç•ªå·ã‚’ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«è¡¨ç¤º                             :simple.el:

ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«(24, 20)ã¨ã„ã£ãŸå½¢å¼ã§ï¼Œã‚«ãƒ¼ã‚½ãƒ«ã®ã‚ã‚‹è¡Œã¨åˆ—ã‚’è¡¨ç¤ºã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (column-number-mode t)
#+end_src

#+RESULTS:
: t

** æ™‚åˆ»ã®è¡¨ç¤º                                                       :time.el:
- http://www.emacswiki.org/emacs/DisplayTime

ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã®æ™‚åˆ»ã‚’24æ™‚é–“è¡¨ç¤ºã«ã—ã¾ã™ï¼ãƒ­ãƒ¼ãƒ‰ã‚¢ãƒ™ãƒ¬ãƒ¼ã‚¸ã¯è¡¨ç¤ºã•ã›ã¾ã›ã‚“ï¼

#+begin_src emacs-lisp
  (setq display-time-24hr-format t)
  (setq display-time-default-load-average nil)
  (display-time-mode 1)
#+end_src

#+RESULTS:

** ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒ•ã‚©ãƒ³ãƒˆã‚’ç«‹ä½“ã«ã™ã‚‹                              :font-lock.el:
- [[http://ja.wikipedia.org/wiki/%E7%AB%8B%E4%BD%93%E6%B4%BB%E5%AD%97][ç«‹ä½“æ´»å­— - Wikipedia]]

#+begin_src emacs-lisp
(custom-set-faces
 '(font-lock-comment-face ((t (:foreground "chocolate1" :slant normal)))))
#+end_src

** ãƒã‚¦ã‚¹æ“ä½œ                                                      :mouse.el:

ãƒã‚¦ã‚¹ã®ä¸­ãƒœã‚¿ãƒ³ã§ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹ä½ç½®ã‚’å¤‰æ›´ã—ã¾ã™ï¼
æ¨™æº–ã§ã¯ã‚¯ãƒªãƒƒã‚¯ã—ãŸä½ç½®ã«ãƒšãƒ¼ã‚¹ãƒˆã•ã‚Œã‚‹ã®ã§ï¼Œ
ã‚«ãƒ¼ã‚½ãƒ«ã®ä½ç½®ã«ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (setq mouse-yank-at-point t)
#+end_src

ãƒã‚¦ã‚¹ã§ãƒ‰ãƒ©ãƒƒã‚¯ã—ãŸç¯„å›²ã‚’Emacsã®ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (setq mouse-drag-copy-region t)
#+end_src

** ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«                                                    :compile.el:

#+begin_src emacs-lisp
 (setq compilation-ask-about-save nil)
#+end_src

** ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã®ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹                            :outline.el:

ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ãƒã‚¤ãƒŠãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ï¼Œæ¨™æº–ã§ C-c @ ã§ã™ï¼
ã“ã‚Œã§ã¯ä½¿ã„ã¥ã‚‰ã„ã®ã§ï¼Œå¤‰æ›´ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (setq outline-minor-mode-prefix "")
#+end_src

** ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒªãƒãƒ¼ãƒ                                            :wdired.el:

diredãƒ¢ãƒ¼ãƒ‰ã§ r ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹ï¼
å®Œäº†ã—ãŸã‚‰C-c C-cã§æ±ºå®šï¼C-c ESCã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼

wdiredã®requireã¯ï¼Œdired-mode-mapã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«å¿…è¦

#+begin_src emacs-lisp
  (require 'wdired)
  (define-key dired-mode-map "r"
    'wdired-change-to-wdired-mode)
#+end_src

#+RESULTS:
: wdired-change-to-wdired-mode

* ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
** DELã‚­ãƒ¼ã‚’BSã«ã™ã‚‹

#+begin_src emacs-lisp
  (global-set-key "\C-h" 'delete-backward-char)
  (global-set-key (kbd "C-c C-h") 'help-command)
#+end_src

** ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º

- Page Upï¼ŒPage Downã§æ“ä½œ
- Macã®å ´åˆã¯fn+â†‘ï¼Œfn+â†“

#+begin_src emacs-lisp
  ;ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã
  (global-set-key (kbd "<prior>") 'text-scale-increase)
  ;ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°ã•ã
  (global-set-key (kbd "<next>")  'text-scale-decrease)
#+end_src

#+RESULTS:
: text-scale-decrease

* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–¢é€£ã®è¨­å®š
** ãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®š
  - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’è¨­å®šã—ã¾ã™ï¼
  - [[http://emacs-jp.github.io/packages/package-management/package-el.html][package.el - Emacs JP]]

#+begin_src emacs-lisp
  (require 'package)
  (setq package-archives
	'(("org" .       "http://orgmode.org/elpa/")
	  ("gnu" .       "http://elpa.gnu.org/packages/")
	  ("marmalade" . "http://marmalade-repo.org/packages/")
	  ("melpa" .     "http://melpa.milkbox.net/packages/")))
  (package-initialize)
#+end_src

** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ã®æ›´æ–°
  - å¿…è¦ã«å¿œã˜ã¦ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
  - å‚è€ƒ
    - [[http://stackoverflow.com/questions/14836958/updating-packages-in-emacs][elpa - Updating packages in Emacs - Stack Overflow]]

#+begin_src emacs-lisp
  (when (not package-archive-contents)
    (package-refresh-contents))
#+end_src

** è‡ªä½œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥ãƒã‚¯ãƒ­

#+begin_src emacs-lisp
    (defun my/package-install (package-symbol)
      (unless (package-installed-p package-symbol)
	(package-install package-symbol)))

    (defun my/package-install-and-require (package-symbol)
      (my/package-install package-symbol)
      (require package-symbol))
#+end_src

* æ—¥æœ¬èªé–¢é€£ã®è¨­å®š
** æ—¥æœ¬èªæ–‡å­—ã‚³ãƒ¼ãƒ‰ã®è¨­å®š

- è¨€èªç’°å¢ƒã‚’æ—¥æœ¬èªã«ï¼Œã‚³ãƒ¼ãƒ‰ä½“ç³»ã‚’UTF-8ã«ã—ã¾ã™ï¼

#+begin_src emacs-lisp
  (set-language-environment "japanese")
  (prefer-coding-system 'utf-8)
#+end_src

** æ—¥æœ¬èªæ–‡å­—ãƒ•ã‚©ãƒ³ãƒˆã®è¨­å®š
*** èª¬æ˜
ï½° Fontã«é–¢ã™ã‚‹èª¿æŸ»
  - [[file:test.org::*Emacs%E3%81%AE%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%81%AE%E3%81%8A%E8%A9%B1][Emacsã®ãƒ•ã‚©ãƒ³ãƒˆã®ãŠè©±]]

*** Rictyã®è¨­å®š                                                      :custom:

- ã“ã®å€¤ã¯customizeå¯èƒ½ã§ã™ï¼

#+begin_src emacs-lisp
  (add-to-list 'default-frame-alist '(font . "ricty-13.5"))
#+end_src

#+RESULTS:
| (font . ricty-13.5) |

*** TODO Macã§ãƒ•ã‚©ãƒ³ãƒˆã‚’æ­£ã—ãè¨­å®šã™ã‚‹
   :PROPERTIES:
   :ID:       16b070ee-507e-49fa-b84d-fa573911ebeb
   :END:

- let* ã¯ï¼ŒåŒã˜ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¸ã®å‚ç…§ã‚’è¨±ã™(letã¯è¨±ã•ãªã„ï¼‰
- ifã¯thenã‚’1ã¤ã®å¼ã—ã‹æ›¸ã‘ãªã„ã®ã§condã‚’ä½¿ã†ï¼whenã‚‚ã‚ã‚‹ï¼
- [[http://blog.sanojimaru.com/post/19807398882/cocoa-emacs-ricty][cocoa emacsã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç”¨ãƒ•ã‚©ãƒ³ãƒˆRictyã‚’ä½¿ã†]]
  ï½° ã“ã®è¨˜äº‹ï¼Œã‚ã‚„ã—ã„ã‹ã‚‚ï¼
- daemonã§å‹•ã‹ã™ã¨ãŠã¡ã‚‹ã‹ã‚‚

#+begin_src emacs-lisp
  ;; (cond
  ;;  ((eq system-type 'darwin)
  ;;   (let* ((size 14)
  ;;          (h (* size 10))
  ;;          (font-ascii "Ricty")
  ;;          (font-jp    "Ricty")
  ;;          (font-spec-ascii (font-spec :family font-ascii))
  ;;          (font-spec-jp    (font-spec :family font-jp)))
  ;;     (set-face-attribute 'default nil :family font-ascii :height h)
  ;;     (set-fontset-font nil 'japanese-jisx0208        font-spec-jp)
  ;;     (set-fontset-font nil 'japanese-jisx0212        font-spec-jp)
  ;;     (set-fontset-font nil 'japanese-jisx0213.2004-1 font-spec-jp)
  ;;     (set-fontset-font nil 'japanese-jisx0213-1      font-spec-jp)
  ;;     (set-fontset-font nil 'japanese-jisx0213-2      font-spec-jp)
  ;;     (set-fontset-font nil 'katakana-jisx0201        font-spec-jp)
  ;;     (set-fontset-font nil '(#x0080 . #x024F)        font-spec-ascii)
  ;;     (set-fontset-font nil '(#x0370 . #x03FF)        font-spec-ascii))
  ;;   ))
#+end_src

#+RESULTS:

** æ—¥æœ¬èªå…¥åŠ›æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ«è‰²ã®å¤‰æ›´

#+begin_src emacs-lisp
  (add-hook 'input-method-activate-hook
	    '(lambda () (set-cursor-color "green")))
  (add-hook 'input-method-inactivate-hook
	    '(lambda () (set-cursor-color "orchid")))
#+end_src

** Linuxã§ã®Mozcã®è¨­å®š

æ³¨æ„: in ~/.Xresourcesã«
  Emacs*useXIM:	false
ã¨è¨­å®šã—ã¦ãŠãã“ã¨ï¼

- http://www11.atwiki.jp/s-irie/pages/21.html#basic
- http://d.hatena.ne.jp/iRiE/20100530/1275212234

- ç­†è€…ã®å ´åˆï¼ŒOSå´ã§ã‚‚C-oã§IMEã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ãŸã‚ï¼Œã“ã‚Œã‚’è¨­å®šã—ã¦ãŠã‹ãªã„ã¨ï¼ŒC-c C-oãªã©ãŒåŠ¹ã‹ãªããªã‚‹ï¼

#+begin_src emacs-lisp
  (when (eq system-type 'gnu/linux)
    (require 'mozc)
    (setq default-input-method "japanese-mozc")
    (global-set-key (kbd "C-o") 'toggle-input-method)
    (setq mozc-candidate-style 'overlay))
#+end_src

#+RESULTS:
: overlay

* Emacs LISP ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãƒã‚¤ãƒ–ãƒ«

- p.31ã‚ˆã‚Š

** open-junk-file

#+begin_src emacs-lisp
  (my/package-install-and-require 'open-junk-file)
  (global-set-key (kbd "C-x C-z") 'open-junk-file)
#+end_src

** lispxmp

- å¼ã®è©•ä¾¡çµæœã‚’æ³¨é‡ˆã™ã‚‹
  - M-; M-; ã¦ lispxmpç”¨ã‚³ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•æŒ¿å…¥
  - C-c C-d ã§è©•ä¾¡çµæœã‚’æ³¨é‡ˆ

#+begin_src emacs-lisp
  (my/package-install-and-require 'lispxmp)                 ; =>
  (define-key emacs-lisp-mode-map (kbd "C-c C-d") 'lispxmp) ; =>
#+end_src

** paredit

- ã‚«ãƒƒã‚³ã®å¯¾å¿œã‚’ä¿æŒã—ã¦ç·¨é›†

#+begin_src emacs-lisp
  (my/package-install-and-require 'paredit)
  (add-hook 'emacs-lisp-mode-hook 'enable-paredit-mode)
  (add-hook 'lisp-interaction-mode-hook 'enable-paredit-mode)
  (add-hook 'lisp-mode-hook 'enable-paredit-mode)
  (add-hook 'ielm-mode-hook 'enable-paredit-mode)
#+end_src

** TODO auto-async-byte-compile

#+begin_src emacs-lisp :tangle no
  (my/package-install-and-require 'auto-async-byte-compile)
  (setq auto-async-byte-compile-exclude-files-regexp "/junk/")
  (add-hook 'emacs-lisp-mode-hook 'enable-auto-async-byte-compile-mode)
#+end_src

** eldoc

#+begin_src emacs-lisp
  (add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode)
  (add-hook 'lisp-interaction-mode-hook 'turn-on-eldoc-mode)
  (add-hook 'ielm-mode-hook 'turn-on-eldoc-mode)
  (setq eldoc-idle-delay 0.2)
  (setq eldoc-minor-mode-string "")
#+end_src

** show-paren-mode

- å¯¾å¿œã™ã‚‹ã‚«ãƒƒã‚³ã‚’è¡¨ç¤ºã™ã‚‹

#+begin_src emacs-lisp
  (show-paren-mode 1)
#+end_src

** TODO newline-and-indent

âˆ’ RET ã¨ C-m ã¯åŒã˜
- TODO C-jã¨ã®é•ã„ã¯ï¼Ÿ

#+begin_src emacs-lisp :tangle no
  (global-set-key (kbd "C-m") 'newline-and-indent)
#+end_src

** TODO find-function

- ã“ã‚Œã¯ä½•ã‚’ã™ã‚‹ã‚“ã ã‚ã†ï¼Ÿ

#+begin_src emacs-lisp
  (find-function-setup-keys)
#+end_src

* exec-path-from-shell

  - Shellã®PATHè¨­å®šã‚’å¼•ãç¶™ã:
    - [[http://qiita.com/catatsuy/items/3dda714f4c60c435bb25][Emacsã§PATHã®è¨­å®šãŒå¼•ãç¶™ãŒã‚Œãªã„å•é¡Œã‚’ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã«è§£æ±ºã™ã‚‹ - Qiita {ã‚­ãƒ¼ã‚¿}]]

#+begin_src emacs-lisp
  (my/package-install-and-require 'exec-path-from-shell)
  (exec-path-from-shell-initialize)
#+end_src

* yasnippet
  - [[http://fukuyama.co/yasnippet][yasnippet 8.0ã®å°å…¥ã‹ã‚‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®æ›¸ãæ–¹ã€anything/helm/auto-completeã¨ã®é€£æº - Webå­¦ã³]]

#+begin_src emacs-lisp
  (dolist (package '(yasnippet))
    (when (not (package-installed-p package))
      (package-install package)))
  (require 'yasnippet)
  (yas-global-mode 1)
  (setq yas-snippet-dirs '("~/.emacs.d/snippets"))
#+end_src

* migemo
** æ¦‚è¦
ãƒ­ãƒ¼ãƒå­—ã§æ—¥æœ¬èªã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒ

- æ³¨æ„
  - cmigemoã‚³ãƒãƒ³ãƒ‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ï¼
  - locate migemo-dictã§è¾æ›¸ã®å ´æ‰€èª¿ã¹ï¼Œè¨­å®šã—ã¦ãã ã•ã„ï¼
- å‚è€ƒ
  - https://github.com/emacs-jp/migemo
  - [[http://qiita.com/catatsuy/items/c5fa34ead92d496b8a51][migemoã‚’ä½¿ã£ã¦Emacsãƒ©ã‚¤ãƒ•ã‚’å¿«é©ã« - Qiita {ã‚­ãƒ¼ã‚¿}]]

** å®Ÿè¡Œå¯å¦ç¢ºèª

#+begin_src emacs-lisp
  (unless (executable-find "cmigemo")
    (warn "ï¼ï¼ è­¦å‘Šï¼šcmigemoã‚³ãƒãƒ³ãƒ‰ãŒå‘¼ã³å‡ºã›ã¾ã›ã‚“ã€€ï¼ï¼"))
#+end_src

#+RESULTS:
: t

** è¨­å®š

#+begin_src emacs-lisp
  (when (and (executable-find "cmigemo")
	     (require 'migemo nil t))
    (setq migemo-options '("-q" "--emacs"))

    (setq migemo-user-dictionary nil)
    (setq migemo-regex-dictionary nil)
    (setq migemo-coding-system 'utf-8-unix)
    (load-library "migemo")
    (migemo-init)

    (setq migemo-command "cmigemo")

    (cond
     ((eq system-type 'gnu/linux)
      (setq migemo-dictionary "/usr/share/cmigemo/utf-8/migemo-dict"))
     ((eq system-type 'darwin)
      (setq migemo-dictionary "/usr/local/share/migemo/utf-8/migemo-dict")))
    )
#+end_src

#+RESULTS:
: /usr/share/cmigemo/utf-8/migemo-dict

* Org
** Orgã«ã¤ã„ã¦
*** ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
  - [[http://orgmode.org/org.html][The Org Manual]]
  - [[http://orgmode.org/elpa.html][Org Emacs lisp Package Archive]]
*** Dropboxã¨ã®é€£æº

** orgãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#+begin_src emacs-lisp
  (dolist (package '(org org-plus-contrib))
    (when (not (package-installed-p package))
      (package-install package)))

  (require 'org)
#+end_src

** æ€ã„ã¤ã„ãŸã‚‰ã™ãè¨˜éŒ²ï¼ˆCaptureï¼‰
- æº–å‚™
  - mkdir ~/Dropbox/Org
- org-directory ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯~/org
- ã“ã‚Œã‚’Dropboxã®ä¸‹ã«ã™ã‚‹ï¼Dropbox/Org
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯è‡ªåˆ†ã§ä½œã‚‹ã“ã¨ï¼

- org-default-notes-file ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ .notes
- ãŸã ã—ï¼Œ.notesã‚’é–‹ã„ã¦ã‚‚orgãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‰ãªã„ã®ã§ï¼Œã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ï¼
- ã ã‹ã‚‰ï¼Œãƒ•ã‚¡ã‚¤ãƒ«åã¯æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ -> notes.org
- ãã®ä»–ã«ï¼Œt: Todoã¨j: Journalï¼ˆæ—¥è¨˜å¸³ï¼‰ã‚’ï¼

- notes.orgã¯ï¼Œãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸æ‰±ã„

| èª¬æ˜                       | å¤‰æ•°å                 | æ¨å¥¨               |
|----------------------------+------------------------+--------------------|
| å‚™å¿˜éŒ²ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãå ´æ‰€ | org-directory          | "~/Dropbox/Org"    |
| ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã®æŒ‡å®š   | org-agenda-files       | ("~/Dropbox/Org/") |
| ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒãƒ¼ãƒ„         | org-default-notes-file | "notes.org"        |
| ã‚­ãƒ£ãƒ—ãƒãƒ£                 | org-capture-templates  | t: Todo j: Journal |

- org-agenda-files -> MobileOrgã«Pushã™ã‚‹

#+begin_src emacs-lisp
  (setq org-directory "~/Dropbox/Org")
  (setq org-agenda-files (quote ("~/Dropbox/Org/")))
  (setq org-default-notes-file "notes.org")
#+end_src

#+RESULTS:
| ~/Dropbox/Org/ |

** ã‚­ãƒ£ãƒ—ãƒãƒ£ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

#+begin_src emacs-lisp
    (setq org-capture-templates
	  (quote
	   (("t" "Todo" entry (file+headline "todo.org" "Tasks")
	     "* TODO [#B] %?
  SCHEDULED: %t
  ")
	    ("l" "Link as Todo" entry (file+headline "todo.org" "Tasks")
	     "* TODO [#B] %a
  SCHEDULED: %t
  ã€€å¼•ç”¨: %i
  %?
  ")
	    ("j" "Journal" entry (file+datetree "journal.org")
	     "* %?
  ä½œæˆæ—¥: %U
  ã€€å¼•ç”¨: %i
  ãƒªãƒ³ã‚¯: %a
  ")
	    ("b" "Bookmark" entry (file+headline "bookmark.org" "Bookmarks")
	     "* TODO [#B] %a :bookmark:
  SCHEDULED: %t
  ã€€å¼•ç”¨: %i
  %?
  ")
	    )))
#+end_src

** Mobile Orgé–¢é€£

- [[https://github.com/matburt/mobileorg-android/wiki][Home Â· matburt/mobileorg-android Wiki]]


#+begin_src emacs-lisp
  (setq org-mobile-directory "~/Dropbox/ã‚¢ãƒ—ãƒª/MobileOrg")
  (setq org-mobile-inbox-for-pull "~/Dropbox/Org/from-mobile.org")
#+end_src

#+RESULTS:
: ~/Dropbox/Org/from-mobile.org

** Babel

| èª¬æ˜ | å¤‰æ•°å | æ¨å¥¨ |
|------+--------+------|
|      |        |      |

#+begin_src emacs-lisp
  (setq org-babel-load-languages
	(quote
	 ((emacs-lisp . t)
	  (dot . t)
	  (java . t)
	  (ruby . t)
	  (sh . t))))
#+end_src

#+RESULTS:
| (emacs-lisp . t) | (dot . t) | (java . t) | (ruby . t) | (sh . t) |

#+begin_src emacs-lisp
  (setq org-confirm-babel-evaluate nil)
#+end_src

#+RESULTS:

** äºˆå®šè¡¨ç”Ÿæˆè¿½åŠ å‘½ä»¤

- [[http://orgmode.org/manual/Matching-tags-and-properties.html][Matching tags and properties - The Org Manual]]
- [[https://www.gnu.org/software/emacs/manual/html_node/org/Special-agenda-views.html][Special agenda views - The Org Manual]]

#+begin_src emacs-lisp
  (setq org-agenda-custom-commands
	(quote
	 (("x" "TODOs without Scheduled" tags-todo "+SCHEDULED=\"\"" nil)
	  ("d" "TODOs without Deadline" tags-todo "+DEADLINE=\"\"" nil)
	  ("p" "ç§ç”¨" tags-todo "+ç§ç”¨" nil)
	  ("P" "ç§ç”¨ä»¥å¤–" tags-todo "-ç§ç”¨" nil)
	  ("n" "Agenda and all TODO's" ((agenda "" nil)
					(alltodo "" nil)) nil))))
#+end_src

#+RESULTS:
| x | TODOs without Scheduled | tags-todo                      | +SCHEDULED="" | nil |
| d | TODOs without Deadline  | tags-todo                      | +DEADLINE=""  | nil |
| p | ç§ç”¨                    | tags-todo                      | +ç§ç”¨         | nil |
| P | ç§ç”¨ä»¥å¤–                | tags-todo                      | -ç§ç”¨         | nil |
| n | Agenda and all TODO's   | ((agenda  nil) (alltodo  nil)) | nil           |     |

** Org Column Title
- Heightã‚’ãƒ•ã‚©ãƒ³ãƒˆã®é«˜ã•ã«åˆã‚ã›ã‚‹

** ãã®ä»–

| èª¬æ˜                           | å¤‰æ•°å                         | æ¨å¥¨                          |
|--------------------------------+--------------------------------+-------------------------------|
| ãƒãƒƒã‚¯ã‚°ãƒ©ãƒ³ãƒ‰ã§ã®ã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆ | org-export-in-background       | nil                           |
| ç”»åƒã‚’è¡¨ç¤º                     | org-startup-with-inline-images | t                             |
| ToDoã‚¢ã‚¤ãƒ†ãƒ ã®çŠ¶æ…‹             | org-todo-keywords              | TODO WAIT DONE SOMEDAY CANCEL |
|                                |                                |                               |

** TODOã®ç¨®é¡

#+begin_src emacs-lisp
  (setq org-todo-keywords (quote ((sequence "TODO(t)" "WIP(p)" "WAIT(w)" "|" "DONE(d)" "SOMEDAY(s)" "CANCEL(c)"))))
#+end_src

#+RESULTS:
| sequence | TODO(t) | WIP(p) | WAIT(w) |   |   | DONE(d) | SOMEDAY(s) | CANCEL(c) |

** æœŸæ—¥ã®ä½•æ—¥å‰ã«äºˆå®šè¡¨ï¼ˆAgendaï¼‰ã«è¡¨ç¤ºã™ã‚‹ã‹

#+begin_src emacs-lisp
  (setq org-deadline-warning-days 7)
#+end_src

#+RESULTS:
: 7

** Linewrap

- [[http://superuser.com/questions/299886/linewrap-in-org-mode-of-emacs][Linewrap in Org-mode of Emacs? - Super User]]

#+begin_src emacs-lisp
  (define-key org-mode-map "\M-q" 'toggle-truncate-lines)
#+end_src

#+RESULTS:
: toggle-truncate-lines

** TODO æœªæ•´ç†

#+begin_src emacs-lisp
(custom-set-variables
 '(org-export-in-background nil)
 '(org-src-fontify-natively t))
#+end_src

** Shellã®ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œã«bashã‚’ä½¿ã†
    :PROPERTIES:
    :ID:       adc108a7-c5d7-49b7-b1fb-bfb681d748b0
    :END:
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚·ã‚§ãƒ«ãŒzshãªã®ã§ï¼Œè¨­å®šã—ã¦ãŠãï¼
   - 2014-01-24ç¾åœ¨ï¼Œcustomizationã®å¯¾å¿œã§ã¯ãªã„æ¨¡æ§˜ï¼

#+begin_src emacs-lisp
(setq org-babel-sh-command "bash")
#+end_src

** ã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆ
*** Markdown export

#+begin_src emacs-lisp
  (require 'ox-md)
#+end_src

*** mediawiki export

#+begin_src emacs-lisp
  (require 'ox-mediawiki)
#+end_src

*** LaTeX export
**** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿

#+begin_src emacs-lisp
  (require 'ox-latex)
#+end_src

**** PDFã‚’ç”Ÿæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰

#+begin_src emacs-lisp
  (when (or
	 (eq system-type 'gnu/linux)
	 (eq system-type 'darwin))
    (setq org-latex-pdf-process
	  '("latexmk -e '$latex=q/platex %S/' -e '$bibtex=q/pbibtex %B/' -e '$makeindex=q/mendex -o %D %S/' -e '$dvipdf=q/dvipdfmx -o %D %S/' -norc -gg -pdfdvi %f"))
    )
#+end_src

#+RESULTS:
| latexmk -e '$latex=q/platex %S/' -e '$bibtex=q/pbibtex %B/' -e '$makeindex=q/mendex -o %D %S/' -e '$dvipdf=q/dvipdfmx -o %D %S/' -norc -gg -pdfdvi %f |

**** æ–‡æ›¸ã‚¯ãƒ©ã‚¹ã®è¨­å®š(jsarticle)

#+begin_src emacs-lisp
  (setq org-latex-default-class "jsarticle")
  (add-to-list 'org-latex-classes
	       '("jsarticle"
		 "\\ifdefined\\ucs
    \\documentclass[uplatex,12pt,a4paper,papersize,dvipdfmx]{jsarticle}
  \\else
    \\documentclass[12pt,a4paper,papersize,dvipdfmx]{jsarticle}
  \\fi
  [NO-DEFAULT-PACKAGES]
  \\usepackage{amsmath}
  \\usepackage{newtxtext,newtxmath}
  \\usepackage{graphicx}
  \\usepackage{hyperref}
  \\usepackage{pxjahyper}
  \\hypersetup{setpagesize=false,colorlinks=true}"
		 ("\\section{%s}" . "\\section*{%s}")
		 ("\\subsection{%s}" . "\\subsection*{%s}")
		 ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
		 ("\\paragraph{%s}" . "\\paragraph*{%s}")
		 ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
#+end_src

#+RESULTS:
| beamer    | \documentclass[dvipdfmx]{beamer}\n[NO-DEFAULT-PACKAGES]\n\usepackage{bxdpx-beamer}\n\usepackage{pxjahyper}\n\usepackage{minijs}\n\renewcommand{\kanjifamilydefault}{\gtdefault}\n\AtBeginSection[]\n{\n  \begin{frame}<beamer>{Outline}\n  \tableofcontents[currentsection,currentsubsection]\n  \end{frame}\n}                                                     | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| beamer    | \documentclass[presentation]{beamer}\n[DEFAULT-PACKAGES]\n[PACKAGES]\n[EXTRA]                                                                                                                                                                                                                                                                                       | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |                                      |                                            |
| jsarticle | \ifdefined\ucs\n  \documentclass[uplatex,12pt,a4paper,papersize,dvipdfmx]{jsarticle}\n\else\n  \documentclass[12pt,a4paper,papersize,dvipdfmx]{jsarticle}\n\fi\n[NO-DEFAULT-PACKAGES]\n\usepackage{amsmath}\n\usepackage{newtxtext,newtxmath}\n\usepackage{graphicx}\n\usepackage{hyperref}\n\usepackage{pxjahyper}\n\hypersetup{setpagesize=false,colorlinks=true} | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| article   | \documentclass[11pt]{article}                                                                                                                                                                                                                                                                                                                                       | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| report    | \documentclass[11pt]{report}                                                                                                                                                                                                                                                                                                                                        | (\part{%s} . \part*{%s})       | (\chapter{%s} . \chapter*{%s})       | (\section{%s} . \section*{%s})             | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |
| book      | \documentclass[11pt]{book}                                                                                                                                                                                                                                                                                                                                          | (\part{%s} . \part*{%s})       | (\chapter{%s} . \chapter*{%s})       | (\section{%s} . \section*{%s})             | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |

*** LeTex (beamer) export
**** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿

#+begin_src emacs-lisp
(require 'ox-beamer)
#+end_src

**** æ–‡æ›¸ã‚¯ãƒ©ã‚¹ã®è¨­å®š(beamer)

#+begin_src emacs-lisp
(add-to-list 'org-latex-classes
	     '("beamer"
	       "\\documentclass[dvipdfmx]{beamer}
[NO-DEFAULT-PACKAGES]
\\usepackage{bxdpx-beamer}
\\usepackage{pxjahyper}
\\usepackage{minijs}
\\renewcommand{\\kanjifamilydefault}{\\gtdefault}
\\AtBeginSection[]
{
  \\begin{frame}<beamer>{Outline}
  \\tableofcontents[currentsection,currentsubsection]
  \\end{frame}
}"
	       ("\\section{%s}" . "\\section*{%s}")
	       ("\\subsection{%s}" . "\\subsection*{%s}")
	       ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
	       ("\\paragraph{%s}" . "\\paragraph*{%s}")
	       ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))
#+end_src

#+RESULTS:
| beamer    | \documentclass[dvipdfmx]{beamer}\n[NO-DEFAULT-PACKAGES]\n\usepackage{bxdpx-beamer}\n\usepackage{pxjahyper}\n\usepackage{minijs}\n\renewcommand{\kanjifamilydefault}{\gtdefault}\n\AtBeginSection[]\n{\n  \begin{frame}<beamer>{Outline}\n  \tableofcontents[currentsection,currentsubsection]\n  \end{frame}\n}                                                     | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| beamer    | \documentclass[presentation]{beamer}\n[DEFAULT-PACKAGES]\n[PACKAGES]\n[EXTRA]                                                                                                                                                                                                                                                                                       | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |                                      |                                            |
| jsarticle | \ifdefined\ucs\n  \documentclass[uplatex,12pt,a4paper,papersize,dvipdfmx]{jsarticle}\n\else\n  \documentclass[12pt,a4paper,papersize,dvipdfmx]{jsarticle}\n\fi\n[NO-DEFAULT-PACKAGES]\n\usepackage{amsmath}\n\usepackage{newtxtext,newtxmath}\n\usepackage{graphicx}\n\usepackage{hyperref}\n\usepackage{pxjahyper}\n\hypersetup{setpagesize=false,colorlinks=true} | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| article   | \documentclass[11pt]{article}                                                                                                                                                                                                                                                                                                                                       | (\section{%s} . \section*{%s}) | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) | (\paragraph{%s} . \paragraph*{%s})   | (\subparagraph{%s} . \subparagraph*{%s})   |
| report    | \documentclass[11pt]{report}                                                                                                                                                                                                                                                                                                                                        | (\part{%s} . \part*{%s})       | (\chapter{%s} . \chapter*{%s})       | (\section{%s} . \section*{%s})             | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |
| book      | \documentclass[11pt]{book}                                                                                                                                                                                                                                                                                                                                          | (\part{%s} . \part*{%s})       | (\chapter{%s} . \chapter*{%s})       | (\section{%s} . \section*{%s})             | (\subsection{%s} . \subsection*{%s}) | (\subsubsection{%s} . \subsubsection*{%s}) |

** TODO Webã«HTMLã§Publishã™ã‚‹                                         :å€‹äººè¨­å®š:
   :PROPERTIES:
   :ID:       fcdb09c8-3a9a-4ea9-9482-10d445b6db9f
   :END:
   - customzationã«ç§»å‹•ã™ã‚‹ï¼Ÿ

#+begin_src emacs-lisp
(setq org-publish-project-alist
      '(
	("chubachi.net-notes"
	 :base-directory "~/Ubuntu One/WebSites/chubachi.net/org/"
	 :base-extension "org"
	 :publishing-directory "~/Ubuntu One/WebSites/chubachi.net/www/"
	 :publishing-function org-html-publish-to-html
	 ;; :headline-levels 3
	 ;; :section-numbers nil
	 ;; :with-toc nil
	 ;; :html-head "<link rel=\"stylesheet\"
	 ;;               href=\"../other/mystyle.css\" type=\"text/css\"/>"
	 ;; :html-preamble t
	 :recursive t
	 )
	("chubachi.net-static"
	 :base-directory "~/Ubuntu One/WebSites/chubachi.net/org/"
	 :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf"
	 :publishing-directory "~/Ubuntu One/WebSites/chubachi.net/www/"
	 :recursive t
	 :publishing-function org-publish-attachment
	 )
	("chubachi.net"
	 :components ("chubachi.net-notes" "chubachi.net-static"))
      ))
#+end_src

** WordPressã«è¨˜äº‹ã‚’æŠ•ç¨¿ï¼ˆorg2blogï¼‰                                   :å€‹äººè¨­å®š:
  :PROPERTIES:
  :ID:       o2b:83d5ddbc-5e84-446c-826a-a2702eb6b997
  :POST_DATE: [2013-12-28 åœŸ 19:16]
  :POSTID:   18
  :BLOG:     blog.chubachi.net
  :END:

   - ä½¿ã„æ–¹ã¯ [[https://github.com/punchagan/org2blog][punchagan/org2blog]] ã‚’å‚ç…§ï¼
   - ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã•ã›ã‚‹ã«ã¯
     [[http://wordpress.org/plugins/syntaxhighlighter/][WordPress â€º SyntaxHighlighter Evolved Â« WordPress Plugins]]
     ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãï¼
   - emacs lispã«ã¯å¯¾å¿œã—ã¦ã„ãªã„ï¼æ®‹å¿µï¼

   |--------------------------+--------------------------|
   | æ©Ÿèƒ½                     | ã‚³ãƒãƒ³ãƒ‰                 |
   |--------------------------+--------------------------|
   | ãƒ­ã‚°ã‚¤ãƒ³                 | org2blog/wp-login        |
   | æ–°è¦æŠ•ç¨¿                 | org2blog/wp-new-entry    |
   |--------------------------+--------------------------|
   | è‰ç¨¿ã¨ã—ã¦æŠ•ç¨¿           | C-c d                    |
   | å…¬é–‹                     | C-c p                    |
   | è‰ç¨¿ã¨ã—ã¦è‰ç¨¿ï¼ˆãƒšãƒ¼ã‚¸ï¼‰ | C-c D                    |
   | å…¬é–‹ï¼ˆãƒšãƒ¼ã‚¸ï¼‰           | C-c P                    |
   |--------------------------+--------------------------|
   | ä¸‹ä½å±¤ã‚’æŠ•ç¨¿             | org2blog/wp-post-subtree |
   |--------------------------+--------------------------|

#+begin_src emacs-lisp
(dolist (package '(org2blog xml-rpc metaweblog htmlize))
  (when (not (package-installed-p package))
    (package-install package)))
#+end_src

#+begin_src emacs-lisp
(require 'xml-rpc)
(require 'metaweblog)
(require 'org2blog-autoloads)
#+end_src

#+RESULTS:
: org2blog-autoloads

- org2blogã‚’ä½¿ã†ã¨ï¼Œsubtreeã‚’wordpressã«æŠ•ç¨¿ã§ãã‚‹ï¼
#+begin_src emacs-lisp
(setq org2blog/wp-blog-alist
      '(("blog.chubachi.net"
	 :url "http://blog.chubachi.net/xmlrpc.php"
	 :username "yc"
	 :default-title "Emacs title"
	 :default-categories ("org2blog" "emacs")
	 :tags-as-categories nil)
	))
#+end_src


#+begin_src emacs-lisp
  (setq org2blog/wp-use-sourcecode-shortcode t)
#+end_src

** ã‚«ãƒ©ãƒ ã®ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒ•ã‚©ãƒ³ãƒˆ

#+begin_src emacs-lisp
  (custom-set-faces
   '(org-column-title
     ((t (:background "grey30" :underline t :weight bold :height 135)))))
#+end_src

*** è¨­å®šæ–¹æ³•
  - C-c C-lã§Orgå½¢å¼ã®ãƒªãƒ³ã‚¯æŒ¿å…¥
  - [[http://stackoverflow.com/questions/7464951/how-to-make-org-protocol-work][firefox - How to make org-protocol work? - Stack Overflow]]
    - gistã§å…¬é–‹ã—ã¦ã‚ã’ã‚ˆã†ã‹ãª
  - [[http://d.hatena.ne.jp/reppets/20111109/1320846292][Unityãƒ©ãƒ³ãƒãƒ£ãƒ¼ã«è‡ªåˆ†ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/ãƒ“ãƒ«ãƒ‰ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç™»éŒ²ã™ã‚‹ - reppets.log.1]]
  - [[http://kb.mozillazine.org/Register_protocol#Linux][Register protocol - MozillaZine Knowledge Base]]
  - [[http://orgmode.org/worg/org-contrib/org-protocol.html#sec-3-6]]
    - å¤ã„

[[http://orgmode.org/worg/org-contrib/org-protocol.html#sec-3-6][* org-protocol
org-protocol.el â€“ Intercept calls from emacsclient to trigger custom actions]]

#+begin_src
javascript:location.href='org-protocol://store-link://'+encodeURIComponent(location.href)
javascript:location.href='org-protocol://capture://t/'+encodeURIComponent(location.href)+'/'+encodeURIComponent(document.title)+'/'+encodeURIComponent(window.getSelection())
#+end_src

*** æœ‰åŠ¹åŒ–

#+begin_src emacs-lisp
  (require 'org-protocol)
#+end_src

#+RESULTS:
: org-protocol

* Helm
** å‚è€ƒ
   - [[http://d.hatena.ne.jp/a_bicky/20140104/1388822688][Helm ã‚’ã‚¹ãƒˆãƒ¬ã‚¹ãªãä½¿ã†ãŸã‚ã®å€‹äººçš„ãªè¨­å®š - ã‚ã‚‰ã³ãæ—¥è¨˜]]
   - [[https://github.com/emacs-helm/helm/wiki][Home Â· emacs-helm/helm Wiki]]
   - [[http://sleepboy-zzz.blogspot.jp/2012/09/anythinghelm.html][memo: Anythingã‹ã‚‰Helmã«ç§»è¡Œã—ã¾ã—ãŸ]]
   - [[http://www49.atwiki.jp/ntemacs/m/pages/32.html][NTEmacs @ ã‚¦ã‚£ã‚­ - helm ã‚’ä½¿ã†ãŸã‚ã®è¨­å®š - @ï½³ï½¨ï½·ï¾“ï¾Šï¾ï½²ï¾™]]
   - [[http://qiita.com/akisute3@github/items/7c8ea3970e4cbb7baa97][Emacs - helm-mode æœ‰åŠ¹æ™‚ã§ã‚‚ helm-find-files ã¯ç„¡åŠ¹ã«ã™ã‚‹ - Qiita {ã‚­ãƒ¼ã‚¿}]]
   - [[http://www.fan.gr.jp/~ring/doc/elisp_19/elisp-jp_14.html#IDX592][GNU Emacs Lispãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«: 12. ãƒã‚¯ãƒ­]]
     - é€†å¼•ç”¨ç¬¦ã¯`,'ã®å¼•æ•°ã‚’è©•ä¾¡ã—ã€ ãƒªã‚¹ãƒˆæ§‹é€ ã«ãã®å€¤ã‚’å…¥ã‚Œã¾ã™ã€‚

** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+begin_src emacs-lisp
  (my/package-install 'helm)
  (require 'helm-config)
#+end_src

** helm-miniã‚’æœ‰åŠ¹ã«ã™ã‚‹

#+begin_src emacs-lisp
  (global-set-key (kbd "C-c h") 'helm-mini)
#+end_src

** helm-modeã‚’æœ‰åŠ¹ã«ã™ã‚‹
- [[https://github.com/emacs-helm/helm/wiki#18-helm-mode][Home Â· emacs-helm/helm Wiki]]

Customize with: helm-completing-read-handlers-alist
See C-h v helm-completing-read-handlers-alist for more infos.

#+begin_src emacs-lisp
  (helm-mode 1)
#+end_src

** C-h
C-h ã§ãƒãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨åŒã˜ã‚ˆã†ã«æ–‡å­—ã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

#+begin_src emacs-lisp
(define-key helm-map (kbd "C-h") 'delete-backward-char)
(define-key helm-find-files-map (kbd "C-h") 'delete-backward-char)
#+end_src

** C-k
ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã§ C-k å…¥åŠ›æ™‚ã«ã‚«ãƒ¼ã‚½ãƒ«ä»¥é™ã‚’å‰Šé™¤ã™ã‚‹

#+begin_src emacs-lisp
(setq helm-delete-minibuffer-contents-from-point t)
#+end_src

** ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+begin_src emacs-lisp
(dolist (package '(helm-descbinds
		   helm-migemo
		   helm-themes
		   imenu-anywhere
		   helm-c-yasnippet))
  (when (not (package-installed-p package))
    (package-install package)))
#+end_src

** ???

#+begin_src emacs-lisp
(require 'helm-command)
(require 'helm-descbinds)

(setq helm-idle-delay             0.1
      helm-input-idle-delay       0.1
      helm-candidate-number-limit 200)
#+end_src

** helm-migemo - ãƒ­ãƒ¼ãƒå­—æ¤œç´¢

#+begin_src emacs-lisp
  (when (executable-find "cmigemo")
    (require 'helm-migemo)
    (setq helm-use-migemo t)

    (defadvice helm-c-apropos
      (around ad-helm-apropos activate)
      "å€™è£œãŒè¡¨ç¤ºã•ã‚Œãªã„ã¨ããŒã‚ã‚‹ã®ã§ migemoã‚‰ãªã„ã‚ˆã†ã«è¨­å®š."
      (let ((helm-use-migemo nil))
	ad-do-it))

    (defadvice helm-M-x
      (around ad-helm-M-x activate)
      "å€™è£œãŒè¡¨ç¤ºã•ã‚Œãªã„ã¨ããŒã‚ã‚‹ã®ã§ migemoã‚‰ãªã„ã‚ˆã†ã«è¨­å®š."
      (let ((helm-use-migemo nil))
	ad-do-it))
    )
#+end_src

** ãã®ä»–

#+begin_src emacs-lisp
(require 'helm-imenu)
(setq imenu-auto-rescan t)
(setq imenu-after-jump-hook (lambda () (recenter 10))) ; é¸æŠå¾Œã®è¡¨ç¤ºä½ç½®ã‚’èª¿æ•´

(require 'helm-themes)

(require 'helm-c-yasnippet)
#+end_src

** package listã‚’helmã§é¸æŠ

#+begin_src emacs-lisp
(require 'helm-package)
#+end_src

* smartrep.el
- [[http://sheephead.homelinux.org/2011/12/19/6930/][é€£ç¶šæ“ä½œã‚’ç´ æ•µã«ã™ã‚‹smartrep.elä½œã£ãŸ - sheephead]]

** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#+begin_src emacs-lisp
  (dolist (package '(smartrep))
    (when (not (package-installed-p package))
      (package-install package)))
  (require 'smartrep)
#+end_src

** org-modeç”¨è¨­å®š

- eval-after-loadã«ã‚ˆã‚Šï¼ŒorgãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå¾Œï¼Œ
  ã‚‚ã—ãã¯ï¼Œæ—¢ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚Œã°å³ï¼Œå®Ÿè¡Œã™ã‚‹ï¼

#+begin_src emacs-lisp
  (eval-after-load "org"
    '(progn
       (smartrep-define-key
	   org-mode-map
	   "C-c" '(("C-n" . (lambda ()
			      (outline-next-visible-heading 1)))
		   ("C-p" . (lambda ()
			      (outline-previous-visible-heading 1)))))
       ))
#+end_src

* markdown
  - [[http://jblevins.org/projects/markdown-mode/][Emacs Markdown Mode]]

#+begin_src emacs-lisp
  (dolist (package '(markdown-mode))
    (when (not (package-installed-p package))
      (package-install package)))

  (autoload 'markdown-mode "markdown-mode"
     "Major mode for editing Markdown files" t)
  (add-to-list 'auto-mode-alist '("\\.text\\'" . markdown-mode))
  (add-to-list 'auto-mode-alist '("\\.markdown\\'" . markdown-mode))
  (add-to-list 'auto-mode-alist '("\\.md\\'" . markdown-mode))
#+end_src

  - markdownãƒ¢ãƒ¼ãƒ‰ã§ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹

#+begin_src emacs-lisp
  (add-hook 'markdown-mode-hook
	    '(lambda () (outline-minor-mode t)))
#+end_src

* MediaWiki
  - [[http://www.emacswiki.org/emacs/MediaWikiMode][EmacsWiki: Media Wiki Mode]]

#+begin_src emacs-lisp
  (dolist (package '(mediawiki))
    (when (not (package-installed-p package))
      (package-install package)))
  (require 'mediawiki)
#+end_src

* graphviz

#+begin_src emacs-lisp
(dolist (package '(graphviz-dot-mode))
  (when (not (package-installed-p package))
    (package-install package)))

(add-to-list 'auto-mode-alist '("\\.dot$" . graphviz-dot-mode))
#+end_src

#+begin_src emacs-lisp
(setq graphviz-dot-preview-extension "pdf")
#+end_src

* ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
** è‡ªä½œé–¢æ•°

#+begin_src emacs-lisp
  (defun my/fullscreen ()
    (interactive)
    (set-frame-parameter
     nil
     'fullscreen
     (if (frame-parameter nil 'fullscreen)
	 nil
       'fullboth)))

  (defun my/open-init-folder()
    "è¨­å®šãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã¾ã™ï¼"
    (interactive)
    (find-file "~/.emacs.d/init.org"))

  (global-set-key [f11] 'my/fullscreen)
  (global-set-key (kbd "<f1>") 'my/open-init-folder)
#+end_src
** ã‚°ãƒ­ãƒ¼ãƒãƒ«
#+begin_src emacs-lisp
  ;; ================================================================
  ;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  ;; ================================================================
  (dolist (package '(region-bindings-mode key-chord))
    (when (not (package-installed-p package))
      (package-install package)))


  ;; ================================================================
  ;; ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ—ã®è¨­å®š
  ;; ================================================================

  ;;; magit
  (global-set-key (kbd "C-x g") 'magit-status)

  ;; ================================================================
  ;; ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ—ã®è¨­å®š(org-mode)
  ;; ================================================================
  (global-set-key (kbd "C-c l") 'org-store-link)
  (global-set-key (kbd "C-c c") 'org-capture)
  (global-set-key (kbd "C-c a") 'org-agenda)
  (global-set-key (kbd "C-c b") 'org-iswitchb)

  ;; ================================================================
  ;; ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ—ã®è¨­å®š(helm)
  ;; ================================================================
  (let ((key-and-func
	 `(
	   (,(kbd "M-x")     helm-M-x)
	   (,(kbd "M-y")     helm-show-kill-ring)
	   (,(kbd "C-x C-f") helm-find-files)
  ;;         (,(kbd "C-r")   helm-for-files)
  ;;         (,(kbd "C-^")   helm-c-apropos)
  ;;         (,(kbd "C-;")   helm-resume)
  ;;         (,(kbd "M-s")   helm-occur)
  ;;         (,(kbd "M-z")   helm-do-grep)
  ;;         (,(kbd "C-S-h") helm-descbinds)
	   )))
    (loop for (key func) in key-and-func
	  do (global-set-key key func)))

#+end_src

** å€‹äººç”¨ã‚­ãƒ¼ãƒãƒƒãƒ—ã®è¨­å®š

#+begin_src emacs-lisp
  (defun my/other-window-backward ()
    "Move to other window backward."
    (interactive)
    (other-window -1))

  (define-prefix-command 'personal-map)
  (global-set-key (kbd "C-.") 'personal-map)

  (define-key 'personal-map (kbd "C-n") 'other-window)
  (define-key 'personal-map (kbd "C-p") 'my/other-window-backward)

  (define-key 'personal-map (kbd "m") 'imenu)
  (define-key 'personal-map (kbd "h") 'helm-mini)

  (define-key 'personal-map (kbd "i") 'yas-insert-snippet)
  (define-key 'personal-map (kbd "n") 'yas-new-snippet)
  (define-key 'personal-map (kbd "v") 'yas-visit-snippet-file)

  (define-key 'personal-map (kbd "y") 'helm-c-yas-complete)
  (define-key 'personal-map (kbd "s") 'helm-c-yas-create-snippet-on-region)

  (define-key 'personal-map (kbd "b") 'org-beamer-export-to-pdf)

  (cond ((eq system-type 'gnu/linux)
	 (define-key 'personal-map (kbd "p") 'evince-forward-search))
	((eq system-type 'darwin)
	 (define-key 'personal-map (kbd "p") 'skim-forward-search)))

  ;; ================================================================
  ;; ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚‹é–“ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¤‰æ›´ã™ã‚‹
  ;; ================================================================

  (require 'region-bindings-mode)
  (region-bindings-mode-enable)
  (define-key region-bindings-mode-map "a" 'mc/mark-all-like-this)
  (define-key region-bindings-mode-map "p" 'mc/mark-previous-like-this)
  (define-key region-bindings-mode-map "n" 'mc/mark-next-like-this)
  (define-key region-bindings-mode-map "m" 'mc/mark-more-like-this-extended)
  (define-key region-bindings-mode-map "e" 'mc/edit-lines)
  (setq region-bindings-mode-disabled-modes '(mew-summary-mode))

  ;; ================================================================
  ;; key-chordã®è¨­å®šã‚’ã™ã‚‹
  ;; ================================================================
  (require 'key-chord)
  (key-chord-mode 1)

  (key-chord-define-global "gc" 'my/other-window-backward)
  (key-chord-define-global "cr" 'other-window)
#+end_src

#+RESULTS:
: other-window

* Programming

#+begin_src emacs-lisp
;; ================================================================
;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
;; ================================================================
(dolist (package '(multiple-cursors yasnippet))
  (when (not (package-installed-p package))
    (package-install package)))

#+end_src
* è‡ªå‹•è£œé–“:auto-complete

#+begin_src emacs-lisp
    (my/package-install 'auto-complete)
    (require 'auto-complete-config)
    (eval-after-load "auto-complete-config"
      '(progn
	 (message "%s" "%% auto-complete-configã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ. %%")
	 (ac-config-default)
	 (setq ac-comphist-file "~/.emacs.d/data/ac-comphist.dat")
	 (define-key ac-complete-mode-map "\C-n" 'ac-next)
	 (define-key ac-complete-mode-map "\C-p" 'ac-previous)))
#+end_src

#+RESULTS:
: ~/.emacs.d/data/ac-comphist.dat

* è¤‡æ•°ã®ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ‰±ã†:multiple-cursors

#+begin_src emacs-lisp
(require 'multiple-cursors)
#+end_src

#+RESULTS:
: multiple-cursors

#+begin_src emacs-lisp
;; ================================================================
;; Emacs Lisp
;; ================================================================

(add-hook 'emacs-lisp-mode-hook 'outline-minor-mode)
#+end_src

* Undo Tree
#+begin_src emacs-lisp
(dolist (package '(undo-tree))
  (when (not (package-installed-p package))
    (package-install package)))

(require 'undo-tree)
(global-undo-tree-mode t)
#+end_src
* w3m
#+begin_src emacs-lisp
(dolist (package '(w3m))
  (when (not (package-installed-p package))
    (condition-case nil
	(package-install package)
      (error (message "%s" "Please Install w3m command")))))
#+end_src

* Ruby
#+begin_src emacs-lisp
  ;; Så¼ã‹ã‚‰æ­£è¦è¡¨ç¾ã‚’ä½œæˆã™ã‚‹ - by shigemk2
  ;; - http://d.hatena.ne.jp/shigemk2/20120419/1334762456

  ;; Emacsã§Rubyã®é–‹ç™ºç’°å¢ƒã‚’ã‚ã¡ã‚ƒã‚¬ãƒãƒ£ãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ã—ãŸã¾ã¨ã‚ | Futurismo
  ;; http://hmi-me.ciao.jp/wordpress/archives/1295

  ;;; Code:

  ;; ================================================================
  ;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  ;; ================================================================
  (dolist (package '(flymake-ruby
		     flymake-haml
		     flymake-sass
		     flymake-coffee
		     smart-compile))
    (when (not (package-installed-p package))
      (package-install package)))

  (autoload 'ruby-mode "ruby-mode"
    "Mode for editing ruby source files" t)
  (require 'ruby-mode)

  ;; ================================================================
  ;; Ruby DSLs
  ;; ================================================================

  (add-to-list 'auto-mode-alist '("Capfile" . ruby-mode))
  (add-to-list 'auto-mode-alist '("Gemfile" . ruby-mode))
  (add-to-list 'auto-mode-alist '("Guardfile" . ruby-mode))
  (add-to-list 'auto-mode-alist '("Vagrantfile" . ruby-mode))
  (add-to-list 'auto-mode-alist '("Berksfile" . ruby-mode))

  ;; ================================================================
  ;; outline-minnor-mode
  ;; ================================================================

  (require 'outline)
  (add-hook 'ruby-mode-hook
	    (function
	     (lambda ()
	       (defun ruby-outline-level ()
		 (or (and (match-string 1)
			  (or (cdr (assoc (match-string 1) outline-heading-alist))
			      (- (match-end 1) (match-beginning 1))))
		     (cdr (assoc (match-string 0) outline-heading-alist))
		     (- (match-end 0) (match-beginning 0))))

	       (set (make-local-variable 'outline-level) 'ruby-outline-level)

	       (set (make-local-variable 'outline-regexp)
		    (rx (group (* " "))
			bow
			(or "begin" "case" "class" "def" "else" "elsif"
			    "ensure" "if" "module" "rescue" "when" "unless"
			    "private")
			eow))
	       (outline-minor-mode))))

  (add-hook 'rspec-mode-hook
	    (function
	     (lambda ()
	       (defun rspec-outline-level ()
		 (or (and (match-string 1)
			  (or (cdr (assoc (match-string 1) outline-heading-alist))
			      (- (match-end 1) (match-beginning 1))))
		     (cdr (assoc (match-string 0) outline-heading-alist))
		     (- (match-end 0) (match-beginning 0))))

	       (set (make-local-variable 'outline-level) 'rspec-outline-level)

	       (set (make-local-variable 'outline-regexp)
		    (rx (group (* " "))
			bow
			(or "context" "describe" "it" "subject")
			eow))
	       (outline-minor-mode))))

  ;; ================================================================
  ;; flymakeé–¢ä¿‚
  ;; ================================================================

  (require 'flymake-ruby)
  (add-hook 'ruby-mode-hook 'flymake-ruby-load)

  (require 'flymake-haml)
  (add-hook 'haml-mode-hook 'flymake-haml-load)

  (require 'flymake-sass)
  (add-hook 'sass-mode-hook 'flymake-sass-load)

  (require 'flymake-coffee)
  (add-hook 'coffee-mode-hook 'flymake-coffee-load)

  ;; ================================================================
  ;; Use the right Ruby with Emacs and rbenv - Fist of Senn
  ;; - http://blog.senny.ch/blog/2013/02/11/use-the-right-ruby-with-emacs-and-rbenv/
  ;; ================================================================
  ;; (prelude-require-package 'rbenv)

  ;; ;; Setting rbenv path
  ;; (setenv "PATH" (concat (getenv "HOME") "/.rbenv/shims:"
  ;;                        (getenv "HOME") "/.rbenv/bin:"
  ;;                        (getenv "PATH")))
  ;; (setq exec-path (cons (concat (getenv "HOME") "/.rbenv/shims")
  ;;                       (cons (concat (getenv "HOME") "/.rbenv/bin") exec-path)))

  ;; ================================================================
  ;; è³¢ã„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
  ;; ================================================================

  (require 'smart-compile)

  (define-key ruby-mode-map (kbd "C-c c") 'smart-compile)
  (define-key ruby-mode-map (kbd "C-c C-c") (kbd "C-c c C-m"))

  (setq smart-compile-alist
	(quote ((emacs-lisp-mode emacs-lisp-byte-compile)
		(html-mode browse-url-of-buffer)
		(nxhtml-mode browse-url-of-buffer)
		(html-helper-mode browse-url-of-buffer)
		(octave-mode run-octave)
		("\\.c\\'" . "gcc -O2 %f -lm -o %n")
		("\\.[Cc]+[Pp]*\\'" . "g++ -O2 %f -lm -o %n")
		("\\.m\\'" . "gcc -O2 %f -lobjc -lpthread -o %n")
		("\\.java\\'" . "javac %f")
		("\\.php\\'" . "php -l %f")
		("\\.f90\\'" . "gfortran %f -o %n")
		("\\.[Ff]\\'" . "gfortran %f -o %n")
		("\\.cron\\(tab\\)?\\'" . "crontab %f")
		("\\.tex\\'" tex-file)
		("\\.texi\\'" . "makeinfo %f")
		("\\.mp\\'" . "mptopdf %f")
		("\\.pl\\'" . "perl -cw %f")
		("\\.rb\\'" . "bundle exec ruby %f"))))

  ;; ================================================================
  ;; Emacsã§ä¿å­˜æ™‚ã«Firefoxã®ã‚¿ãƒ–ã‚’æ¢ã—ã¦ãƒªãƒ­ãƒ¼ãƒ‰ - Qiita [ã‚­ãƒ¼ã‚¿]
  ;; - http://qiita.com/hakomo/items/9a99115f8911b55957bb
  ;; ================================================================
  (require 'moz)

  (defun my/reload-firefox ()
    "Reload firefox."
    (interactive)
    (comint-send-string (inferior-moz-process) "BrowserReload();"))

  (defun my/run-rake-yard ()
    "Run rake yard."
    (interactive)
    (shell-command "rake yard"))

  (define-key ruby-mode-map (kbd "C-c y") (lambda ()
					    (interactive)
					    (my/run-rake-yard)
					    (my/reload-firefox)))
#+end_src

* PHP

#+begin_src emacs-lisp
  (dolist (package '(php-mode))
    (when (not (package-installed-p package))
      (package-install package)))
#+end_src

#+RESULTS:

* YaTeX

#+begin_src emacs-lisp
;; ================================================================
;; YaTeX - TeX Wiki
;; - http://oku.edu.mie-u.ac.jp/~okumura/texwiki/?YaTeX#nec42ee2
;; ================================================================
(autoload 'yatex-mode "yatex" "Yet Another LaTeX mode" t)
(setq auto-mode-alist
      (append '(("\\.tex$" . yatex-mode)
		("\\.ltx$" . yatex-mode)
		("\\.cls$" . yatex-mode)
		("\\.sty$" . yatex-mode)
		("\\.clo$" . yatex-mode)
		("\\.bbl$" . yatex-mode)) auto-mode-alist))
(setq YaTeX-inhibit-prefix-letter t)
(setq YaTeX-kanji-code nil)
(setq YaTeX-use-LaTeX2e t)
(setq YaTeX-use-AMS-LaTeX t)

;; ================================================================
;; RefTeX with YaTeX
;; ================================================================
(add-hook 'yatex-mode-hook 'turn-on-reftex)
(add-hook 'yatex-mode-hook
	  '(lambda ()
	     (reftex-mode 1)
	     (define-key reftex-mode-map (concat YaTeX-prefix ">") 'YaTeX-comment-region)
	     (define-key reftex-mode-map (concat YaTeX-prefix "<") 'YaTeX-uncomment-region)))

;; ================================================================
;; Outline minor mode for YaTeX
;; See http://www.math.s.chiba-u.ac.jp/~matsu/emacs/emacs20/outline.html
;; ================================================================
(add-hook 'yatex-mode-hook
	  '(lambda () (outline-minor-mode t)))

(make-variable-buffer-local 'outline-regexp)
(add-hook
 'yatex-mode-hook
 (function
  (lambda ()
    (progn
      (setq outline-level 'latex-outline-level)
      (setq outline-regexp
	    (concat "[ \t]*\\\\\\(documentstyle\\|documentclass\\|"
		    "chapter\\|section\\|subsection\\|subsubsection\\)"
		    "\\*?[ \t]*[[{]")
     )))))

(make-variable-buffer-local 'outline-level)
(setq-default outline-level 'outline-level)
(defun latex-outline-level ()
  (save-excursion
    (looking-at outline-regexp)
    (let ((title (buffer-substring (match-beginning 1) (match-end 1))))
      (cond ((equal (substring title 0 4) "docu") 15)
	    ((equal (substring title 0 4) "chap") 0)
	    ((equal (substring title 0 4) "appe") 0)
	    (t (length title))))))

;; ================================================================
;; BibTeX
;; ================================================================
(add-hook 'bibtex-mode-hook
	  '(lambda ()
	     (outline-minor-mode)))

;; ================================================================
;; IPA Fonts
;; ================================================================
(setq YaTeX-dvipdf-command "dvipdfmx -f ptex-ipa")

;; ================================================================
;; auto-fill-mode
;; ================================================================
(add-hook 'yatex-mode-hook
	  '(lambda ()
	     (auto-fill-mode 1)))
#+end_src

* Clean Mode Line
#+begin_src emacs-lisp
;;; 80-clean-mode-line.el --- <description>
;;; Commentary:

;; mode-lineã®ãƒ¢ãƒ¼ãƒ‰æƒ…å ±ã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«è¡¨ç¤ºã™ã‚‹- Life is very short
;; - http://d.hatena.ne.jp/syohex/20130131/1359646452

;;; Code:

(defvar mode-line-cleaner-alist
  '( ;; For minor-mode, first char is 'space'
    (yas-minor-mode . " Ys")
    (paredit-mode . " Pe")
    (eldoc-mode . "")
    (abbrev-mode . "")
    (undo-tree-mode . " Ut")
    (elisp-slime-nav-mode . " EN")
    (helm-gtags-mode . " HG")
    (flymake-mode . " Fm")
    (outline-minor-mode . " Ol")
    (ibus-mode . " IB")
    ;; Major modes
    (lisp-interaction-mode . "Li")
    (python-mode . "Py")
    (ruby-mode   . "Rb")
    (emacs-lisp-mode . "El")
    (markdown-mode . "Md")))

(defun clean-mode-line ()
  (interactive)
  (loop for (mode . mode-str) in mode-line-cleaner-alist
	do
	(let ((old-mode-str (cdr (assq mode minor-mode-alist))))
	  (when old-mode-str
	    (setcar old-mode-str mode-str))
	  ;; major mode
	  (when (eq mode major-mode)
	    (setq mode-name mode-str)))))

(add-hook 'after-change-major-mode-hook 'clean-mode-line)

;;; 80-clean-mode-line.el ends here
#+end_src

* TODO Buffer Move
  :PROPERTIES:
  :ID:       09433d16-46c7-4fe8-8708-9382a1270dc0
  :END:

#+begin_src emacs-lisp :tangle no
  ;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  (setq package-list '(buffer-move))
  (dolist (package package-list)
    (when (not (package-installed-p package))
      (package-install package)))

  ; buffer-move : have to add your own keys
  (global-set-key (kbd "<C-S-up>")     'buf-move-up)
  (global-set-key (kbd "<C-S-down>")   'buf-move-down)
  (global-set-key (kbd "<C-S-left>")   'buf-move-left)
  (global-set-key (kbd "<C-S-right>")  'buf-move-right)
#+end_src

* TODO tab bar
  :PROPERTIES:
  :ID:       e4164ff6-d405-47f7-8ed7-838c9ffa215d
  :END:
#+begin_src emacs-lisp :tangle no
  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  ;;
  ;; tabbar.el
  ;;
  ;; [Emacsã«ã‚¿ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹tabbar.elã®å°å…¥ - 12FF5B8](http://hico-horiuchi.hateblo.jp/entry/20121208/1354975316)

  ;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  (setq package-list '(tabbar))
  (dolist (package package-list)
    (when (not (package-installed-p package))
      (package-install package)))

  (require 'tabbar)
  (tabbar-mode)
  (global-set-key "\M-]" 'tabbar-forward)  ; æ¬¡ã®ã‚¿ãƒ–
  (global-set-key "\M-[" 'tabbar-backward) ; å‰ã®ã‚¿ãƒ–
  ;; ã‚¿ãƒ–ä¸Šã§ãƒã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’ä½¿ã‚ãªã„
  (tabbar-mwheel-mode nil)
  ;; ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã‚ãªã„
  (setq tabbar-buffer-groups-function nil)
  ;; å·¦å´ã®ãƒœã‚¿ãƒ³ã‚’æ¶ˆã™
  (dolist (btn '(tabbar-buffer-home-button
		 tabbar-scroll-left-button
		 tabbar-scroll-right-button))
    (set btn (cons (cons "" nil)
		   (cons "" nil))))
#+end_src

* TODO rcode tools
  :PROPERTIES:
  :ID:       21e85321-7b0d-479f-aa36-66c3d9515adc
  :END:

#+begin_src emacs-lisp :tangle no
  (add-to-list 'load-path "~/.rbenv/versions/2.0.0-p195/lib/ruby/gems/2.0.0/gems/rcodetools-0.8.5.0")

  ;; rcodetools
  (require 'rcodetools)
  (setq rct-find-tag-if-available nil)
  (defun ruby-mode-hook-rcodetools ()
    (define-key ruby-mode-map (kbd "<C-return>") 'rct-complete-symbol)
    (define-key ruby-mode-map "\M-\C-i" 'rct-complete-symbol)
    (define-key ruby-mode-map "\C-c\C-t" 'ruby-toggle-buffer)
    (define-key ruby-mode-map "\C-c\C-d" 'xmp)
    (define-key ruby-mode-map "\C-c\C-f" 'rct-ri))
  (add-hook 'ruby-mode-hook 'ruby-mode-hook-rcodetools)

  (setq rct-get-all-methods-command "PAGER=cat fri -l")
  ;; See docs
#+end_src

* TODO è¡Œç•ªå·è¡¨ç¤º

- è¡Œç•ªå·è¡¨ç¤ºã‚’ã™ã‚‹ã¨org-modeãŒé…ããªã‚‹ã‚‰ã—ã„
  - [[http://stackoverflow.com/questions/5229705/emacs-org-mode-turn-off-line-numbers][Emacs Org-Mode: Turn off line numbers - Stack Overflow]]

#+begin_src emacs-lisp :tangle no
(global-linum-mode t)
(set-face-attribute 'linum nil :foreground "yellow" :height 0.8)
(setq linum-format "%4d")
#+end_src

* ãŠãŸã‚ã—
** TODO Diff

- [[http://stackoverflow.com/questions/331569/diff-save-or-kill-when-killing-buffers-in-emacs]["Diff, save or kill" when killing buffers in Emacs - Stack Overflow]]

#+begin_src emacs-lisp :tangle no
(defadvice kill-buffer (around my-kill-buffer-check activate)
  "Prompt when a buffer is about to be killed."
  (let* ((buffer-file-name (buffer-file-name))
	 backup-file)
    ;; see 'backup-buffer
    (if (and (buffer-modified-p)
	     buffer-file-name
	     (file-exists-p buffer-file-name)
	     (setq backup-file (car (find-backup-file-name buffer-file-name))))
	(let ((answer (completing-read (format "Buffer modified %s, (d)iff, (s)ave, (k)ill? " (buffer-name))
				       '("d" "s" "k") nil t)))
	  (cond ((equal answer "d")
		 (set-buffer-modified-p nil)
		 (let ((orig-buffer (current-buffer))
		       (file-to-diff (if (file-newer-than-file-p buffer-file-name backup-file)
					 buffer-file-name
				       backup-file)))
		   (set-buffer (get-buffer-create (format "%s last-revision" (file-name-nondirectory file-to-diff))))
		   (buffer-disable-undo)
		   (insert-file-contents file-to-diff nil nil nil t)
		   (set-buffer-modified-p nil)
		   (setq buffer-read-only t)
		   (ediff-buffers (current-buffer) orig-buffer)))
		((equal answer "k")
		 (set-buffer-modified-p nil)
		 ad-do-it)
		(t
		 (save-buffer)
		 ad-do-it)))
      ad-do-it)))
#+end_src

#+RESULTS:
: kill-buffer

** ibuffer

#+begin_src emacs-lisp
  (global-set-key (kbd "C-x C-b") 'ibuffer)
#+end_src

* linuxç”¨è¨­å®š
** Linux YaTeX

#+begin_src emacs-lisp
  (when (eq system-type 'gnu/linux)

    (setq YaTeX-dvi2-command-ext-alist
	  '(("texworks\\|evince\\|okular\\|zathura\\|qpdfview\\|pdfviewer\\|mupdf\\|xpdf\\|firefox\\|chromium\\|acroread\\|pdfopen" . ".pdf")))
    (setq tex-command "ptex2pdf -l -ot '-synctex=1'")
  ;;(setq tex-command "ptex2pdf -l -u -ot '-synctex=1'")
  ;;(setq tex-command "pdfplatex")
  ;;(setq tex-command "pdfplatex2")
  ;;(setq tex-command "pdfuplatex")
  ;;(setq tex-command "pdfuplatex2")
  ;;(setq tex-command "pdflatex -synctex=1")
  ;;(setq tex-command "lualatex -synctex=1")
  ;;(setq tex-command "luajitlatex -synctex=1")
  ;;(setq tex-command "xelatex -synctex=1")
  ;;(setq tex-command "latexmk")
  ;(setq tex-command "latexmk -e '$latex=q/platex %O -synctex=1 %S/' -e '$bibtex=q/pbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvipdf=q/dvipdfmx %O -o %D %S/' -norc -gg -pdfdvi")
  ;(setq tex-command "latexmk -e '$latex=q/platex %O -synctex=1 %S/' -e '$bibtex=q/pbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvips=q/dvips %O -z -f %S | convbkmk -g > %D/' -e '$ps2pdf=q/ps2pdf %O %S %D/' -norc -gg -pdfps")
  ;(setq tex-command "latexmk -e '$latex=q/uplatex %O -synctex=1 %S/' -e '$bibtex=q/upbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvipdf=q/dvipdfmx %O -o %D %S/' -norc -gg -pdfdvi")
  ;(setq tex-command "latexmk -e '$latex=q/uplatex %O -synctex=1 %S/' -e '$bibtex=q/upbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvips=q/dvips %O -z -f %S | convbkmk -u > %D/' -e '$ps2pdf=q/ps2pdf %O %S %D/' -norc -gg -pdfps")
  ;(setq tex-command "latexmk -e '$pdflatex=q/pdflatex %O -synctex=1 %S/' -e '$bibtex=q/bibtex %O %B/' -e '$makeindex=q/makeindex %O -o %D %S/' -norc -gg -pdf")
  ;(setq tex-command "latexmk -e '$pdflatex=q/lualatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -lualatex")
  ;(setq tex-command "latexmk -e '$pdflatex=q/luajitlatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -lualatex")
  ;(setq tex-command "latexmk -e '$pdflatex=q/xelatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -xelatex")
  (setq bibtex-command (cond ((string-match "uplatex\\|-u" tex-command) "upbibtex")
			     ((string-match "platex" tex-command) "pbibtex")
			     ((string-match "lualatex\\|luajitlatex\\|xelatex" tex-command) "bibtexu")
			     ((string-match "pdflatex\\|latex" tex-command) "bibtex")
			     (t "pbibtex")))
  (setq makeindex-command (cond ((string-match "uplatex\\|-u" tex-command) "mendex")
				((string-match "platex" tex-command) "mendex")
				((string-match "lualatex\\|luajitlatex\\|xelatex" tex-command) "texindy")
				((string-match "pdflatex\\|latex" tex-command) "makeindex")
				(t "mendex")))

  (setq dvi2-command "evince")
  ;(setq dvi2-command "okular --unique")
  ;(setq dvi2-command "zathura -s -x \"emacsclient --no-wait +%{line} %{input}\"")
  ;(setq dvi2-command "qpdfview --unique")
  ;(setq dvi2-command "pdfviewer")
  ;(setq dvi2-command "texworks")
  ;(setq dvi2-command "mupdf")
  ;(setq dvi2-command "firefox -new-window")
  ;(setq dvi2-command "chromium --new-window")
  (setq dviprint-command-format "acroread `echo %s | sed -e \"s/\\.[^.]*$/\\.pdf/\"`")

  (defun evince-forward-search ()
    (interactive)
    (progn
      (process-kill-without-query
       (start-process
	"fwdevince"
	nil
	"fwdevince"
	(expand-file-name
	 (concat (file-name-sans-extension (or YaTeX-parent-file
					       (save-excursion
						 (YaTeX-visit-main t)
						 buffer-file-name)))
		 ".pdf"))
	(number-to-string (save-restriction
			    (widen)
			    (count-lines (point-min) (point))))
	(buffer-name)))))

  (require 'dbus)

  (defun un-urlify (fname-or-url)
    "A trivial function that replaces a prefix of file:/// with just /."
    (if (string= (substring fname-or-url 0 8) "file:///")
	(substring fname-or-url 7)
      fname-or-url))

  (defun evince-inverse-search (file linecol &rest ignored)
    (let* ((fname (un-urlify file))
	   (buf (find-file fname))
	   (line (car linecol))
	   (col (cadr linecol)))
      (if (null buf)
	  (message "[Synctex]: %s is not opened..." fname)
	(switch-to-buffer buf)
	(goto-line (car linecol))
	(unless (= col -1)
	  (move-to-column col)))))

  (dbus-register-signal
   :session nil "/org/gnome/evince/Window/0"
   "org.gnome.evince.Window" "SyncSource"
   'evince-inverse-search)

  (defun okular-forward-search ()
    (interactive)
    (progn
      (process-kill-without-query
       (start-process
	"okular"
	nil
	"okular"
	"--unique"
	(concat (expand-file-name
		 (concat (file-name-sans-extension (or YaTeX-parent-file
						       (save-excursion
							 (YaTeX-visit-main t)
							 buffer-file-name)))
			 ".pdf"))
		"#src:"
		(number-to-string (save-restriction
				    (widen)
				    (count-lines (point-min) (point))))
		(buffer-file-name))))))

  (add-hook 'yatex-mode-hook
	    '(lambda ()
	       (define-key YaTeX-mode-map (kbd "C-c o") 'okular-forward-search)))

  (defun qpdfview-forward-search ()
    (interactive)
    (progn
      (process-kill-without-query
       (start-process
	"qpdfview"
	nil
	"qpdfview"
	"--unique"
	(concat (expand-file-name
		 (concat (file-name-sans-extension (or YaTeX-parent-file
						       (save-excursion
							 (YaTeX-visit-main t)
							 buffer-file-name)))
			 ".pdf"))
		"#src:"
		(buffer-name)
		":"
		(number-to-string (save-restriction
				    (widen)
				    (count-lines (point-min) (point))))
		":0")))))

  (add-hook 'yatex-mode-hook
	    '(lambda ()
	       (define-key YaTeX-mode-map (kbd "C-c q") 'qpdfview-forward-search)))

  (defun pdfviewer-forward-search ()
    (interactive)
    (progn
      (process-kill-without-query
       (start-process
	"pdfviewer"
	nil
	"pdfviewer"
	(concat "file:"
		(expand-file-name
		 (concat (file-name-sans-extension (or YaTeX-parent-file
						       (save-excursion
							 (YaTeX-visit-main t)
							 buffer-file-name)))
			 ".pdf"))
		"#src:"
		(number-to-string (save-restriction
				    (widen)
				    (count-lines (point-min) (point))))
		" "
		(buffer-name))))))

  (add-hook 'yatex-mode-hook
	    '(lambda ()
	       (define-key YaTeX-mode-map (kbd "C-c p") 'pdfviewer-forward-search)))

  (add-hook 'yatex-mode-hook
	    '(lambda ()
	       (auto-fill-mode -1)))
  )
#+end_src

#+RESULTS:

** dbus for YaTeX
- http://oku.edu.mie-u.ac.jp/~okumura/texwiki/?Emacs#v19f2543

#+begin_src emacs-lisp
  (when (eq system-type 'gnu/linux)
    (require 'dbus)

    (defun un-urlify (fname-or-url)
      "A trivial function that replaces a prefix of file:/// with just /."
      (if (string= (substring fname-or-url 0 8) "file:///")
	  (substring fname-or-url 7)
	fname-or-url))

    (defun evince-inverse-search (file linecol &rest ignored)
      (let* ((fname (un-urlify file))
	     (buf (find-file fname))
	     (line (car linecol))
	     (col (cadr linecol)))
	(if (null buf)
	    (message "[Synctex]: %s is not opened..." fname)
	  (switch-to-buffer buf)
	  (goto-line (car linecol))
	  (unless (= col -1)
	    (move-to-column col)))))

    (when (boundp 'dbus-message-type-method-call) nil t
	  (dbus-register-signal
	   :session nil "/org/gnome/evince/Window/0"
	   "org.gnome.evince.Window" "SyncSource"
	   'evince-inverse-search))
    )
#+end_src

* Macç”¨è¨­å®š
** è¨­å®šå…¨ä½“
#+begin_src emacs-lisp :noweb yes
  (when (eq system-type 'darwin)
    <<mac-keybord-and-input-method-settings>>
    <<mac-fonts-settings>>
    <<mac-yatex-settings>>
  )
#+end_src

** Macç”¨ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¨å…¥åŠ›æ–¹å¼ã®è¨­å®š

#+name: mac-keybord-and-input-method-settings
#+begin_src emacs-lisp :tangle no
  ;; option <-> meta
  (setq ns-command-modifier (quote meta))
  (setq ns-alternate-modifier (quote super))

  ;; ã‚·ã‚¹ãƒ†ãƒ ã¸ä¿®é£¾ã‚­ãƒ¼ã‚’æ¸¡ã•ãªã„
  (setq mac-pass-control-to-system nil)
  (setq mac-pass-command-to-system nil)
  (setq mac-pass-option-to-system nil)

  ;;; C-oã§æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ
  (mac-input-method-mode t)
  (global-set-key "\C-o" 'toggle-input-method)

  ;; ã‹ãª
  (mac-set-input-method-parameter
   "com.google.inputmethod.Japanese.base" 'cursor-color 'green)

  ;; è‹±æ•°å­—
  (mac-set-input-method-parameter
   "com.google.inputmethod.Japanese.Roman" 'cursor-color 'red)

  ;; change cursor type
  (mac-set-input-method-parameter
   "com.google.inputmethod.Japanese.base" 'cursor-type 'box)
#+end_src

** Macç”¨ãƒ•ã‚©ãƒ³ãƒˆã®è¨­å®š

#+name: mac-fonts-settings
#+begin_src emacs-lisp :tangle no
  ;; ================================================================
  ;; Fonts
  ;; ================================================================

  ;; |ã‚ã‚ã‚ã‚ã‚|
  ;; |+-+-+-+-+-|
  ;; |imimimimim|

  ;; (when (x-list-fonts "Ricty")
  ;;   (let* ((size 14)
  ;;          (asciifont "Ricty")
  ;;          (jpfont "Ricty")
  ;;          (h (* size 10))
  ;;          (fontspec)
  ;;          (jp-fontspec))
  ;;     (set-face-attribute 'default nil :family asciifont :height h)
  ;;     (setq fontspec (font-spec :family asciifont))
  ;;     (setq jp-fontspec (font-spec :family jpfont))
  ;;     (set-fontset-font nil 'japanese-jisx0208 jp-fontspec)
  ;;     (set-fontset-font nil 'japanese-jisx0212 jp-fontspec)
  ;;     (set-fontset-font nil 'japanese-jisx0213-1 jp-fontspec)
  ;;     (set-fontset-font nil 'japanese-jisx0213-2 jp-fontspec)
  ;;     (set-fontset-font nil '(#x0080 . #x024F) fontspec)
  ;;     (set-fontset-font nil '(#x0370 . #x03FF) fontspec)))

#+end_src

** Macç”¨YaTeXã®è¨­å®š

#+name: mac-yatex-settings
#+begin_src emacs-lisp :tangle no
  (setq YaTeX-dvi2-command-ext-alist
	'(("Preview\\|TeXShop\\|TeXworks\\|Skim\\|mupdf\\|xpdf\\|Firefox\\|Adobe" . ".pdf")))
  (setq tex-command "/usr/texbin/ptex2pdf -l -ot '-synctex=1'")
  ;(setq tex-command "/usr/texbin/ptex2pdf -l -u -ot '-synctex=1'")
  ;(setq tex-command "/usr/local/bin/pdfplatex")
  ;(setq tex-command "/usr/local/bin/pdfplatex2")
  ;(setq tex-command "/usr/local/bin/pdfuplatex")
  ;(setq tex-command "/usr/local/bin/pdfuplatex2")
  ;(setq tex-command "/usr/texbin/pdflatex -synctex=1")
  ;(setq tex-command "/usr/texbin/lualatex -synctex=1")
  ;(setq tex-command "/usr/texbin/luajitlatex -synctex=1")
  ;(setq tex-command "/usr/texbin/xelatex -synctex=1")
  ;(setq tex-command "/usr/texbin/latexmk")
  ;(setq tex-command "/usr/texbin/latexmk -e '$latex=q/platex %O -synctex=1 %S/' -e '$bibtex=q/pbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvipdf=q/dvipdfmx %O -o %D %S/' -norc -gg -pdfdvi")
  ;(setq tex-command "/usr/texbin/latexmk -e '$latex=q/platex %O -synctex=1 %S/' -e '$bibtex=q/pbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvips=q/dvips %O -z -f %S | convbkmk -g > %D/' -e '$ps2pdf=q/ps2pdf %O %S %D/' -norc -gg -pdfps")
  ;(setq tex-command "/usr/texbin/latexmk -e '$latex=q/uplatex %O -synctex=1 %S/' -e '$bibtex=q/upbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvipdf=q/dvipdfmx %O -o %D %S/' -norc -gg -pdfdvi")
  ;(setq tex-command "/usr/texbin/latexmk -e '$latex=q/uplatex %O -synctex=1 %S/' -e '$bibtex=q/upbibtex %O %B/' -e '$makeindex=q/mendex %O -o %D %S/' -e '$dvips=q/dvips %O -z -f %S | convbkmk -u > %D/' -e '$ps2pdf=q/ps2pdf %O %S %D/' -norc -gg -pdfps")
  ;(setq tex-command "/usr/texbin/latexmk -e '$pdflatex=q/pdflatex %O -synctex=1 %S/' -e '$bibtex=q/bibtex %O %B/' -e '$makeindex=q/makeindex %O -o %D %S/' -norc -gg -pdf")
  ;(setq tex-command "/usr/texbin/latexmk -e '$pdflatex=q/lualatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -lualatex")
  ;(setq tex-command "/usr/texbin/latexmk -e '$pdflatex=q/luajitlatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -lualatex")
  ;(setq tex-command "/usr/texbin/latexmk -e '$pdflatex=q/xelatex %O -synctex=1 %S/' -e '$bibtex=q/bibtexu %O %B/' -e '$makeindex=q/texindy %O -o %D %S/' -norc -gg -xelatex")
  (setq bibtex-command (cond ((string-match "uplatex\\|-u" tex-command) "/usr/texbin/upbibtex")
			     ((string-match "platex" tex-command) "/usr/texbin/pbibtex")
			     ((string-match "lualatex\\|luajitlatex\\|xelatex" tex-command) "/usr/texbin/bibtexu")
			     ((string-match "pdflatex\\|latex" tex-command) "/usr/texbin/bibtex")
			     (t "/usr/texbin/pbibtex")))
  (setq makeindex-command (cond ((string-match "uplatex\\|-u" tex-command) "/usr/texbin/mendex")
				((string-match "platex" tex-command) "/usr/texbin/mendex")
				((string-match "lualatex\\|luajitlatex\\|xelatex" tex-command) "/usr/texbin/texindy")
				((string-match "pdflatex\\|latex" tex-command) "/usr/texbin/makeindex")
				(t "/usr/texbin/mendex")))
  ;(setq dvi2-command "/usr/bin/open -a Preview")
  (setq dvi2-command "/usr/bin/open -a Skim")
  ;(setq dvi2-command "/usr/bin/open -a TeXShop")
  ;(setq dvi2-command "/usr/bin/open -a TeXworks")
  ;(setq dvi2-command "/usr/bin/open -a Firefox")
  (setq dviprint-command-format "/usr/bin/open -a \"Adobe Reader\" `echo %s | sed -e \"s/\\.[^.]*$/\\.pdf/\"`")

  (defun skim-forward-search ()
    (interactive)
    (progn
      (process-kill-without-query
       (start-process
	"displayline"
	nil
	"/Applications/Skim.app/Contents/SharedSupport/displayline"
	(number-to-string (save-restriction
			    (widen)
			    (count-lines (point-min) (point))))
	(expand-file-name
	 (concat (file-name-sans-extension (or YaTeX-parent-file
					       (save-excursion
						 (YaTeX-visit-main t)
						 buffer-file-name)))
		 ".pdf"))
	buffer-file-name))))
#+end_src

* Windowsç”¨è¨­å®š
** TODO è¨­å®šå…¨ä½“

#+begin_src emacs-lisp :noweb yes
  (when (or (eq system-type 'windows-nt)
	    (eq system-type 'cygwin))
    <<windows-settings>>
  )
#+end_src

** Windowsç”¨è¨­å®š

#+name: windows-settings
#+begin_src emacs-lisp :tangle no
  (setq file-name-coding-system 'cp932)

  ;; Ctrl-gã¨ã‹ã§ãƒ™ãƒ«ã‚’é³´ã‚‰ã•ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
  (setq visible-bell t)
  (setq ring-bell-function 'ignore)

  ;;;** æ¨™æº–IMEã®è¨­å®š
  (setq default-input-method "W32-IME")

  ;;;** IMEã®åˆæœŸåŒ–
  (w32-ime-initialize)

  ;;;** IMEçŠ¶æ…‹ã®ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³è¡¨ç¤º
  (setq-default w32-ime-mode-line-state-indicator "[--]")
  (setq w32-ime-mode-line-state-indicator-list '("[--]" "[ã‚]" "[--]"))

  ;;;** IME OFFæ™‚ã®åˆæœŸã‚«ãƒ¼ã‚½ãƒ«ã‚«ãƒ©ãƒ¼
  (set-cursor-color "red")

  ;;;** IME ON/OFFæ™‚ã®ã‚«ãƒ¼ã‚½ãƒ«ã‚«ãƒ©ãƒ¼
  (add-hook 'input-method-activate-hook
	    (lambda() (set-cursor-color "green")))
  (add-hook 'input-method-inactivate-hook
	    (lambda() (set-cursor-color "red")))

  ;;;** ãƒãƒƒãƒ•ã‚¡åˆ‡ã‚Šæ›¿ãˆæ™‚ã«IMEçŠ¶æ…‹ã‚’å¼•ãç¶™ã
  (setq w32-ime-buffer-switch-p nil)

  ;;;** Ctrl-Oã§ãƒˆã‚°ãƒ«ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹
  (global-set-key (kbd "C-o") 'toggle-input-method)

  ;; ;; cp932ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ™‚ã®è¡¨ç¤ºã‚’ã€ŒPã€ã¨ã™ã‚‹
  ;; (coding-system-put 'cp932 :mnemonic ?P)
  ;; (coding-system-put 'cp932-dos :mnemonic ?P)
  ;; (coding-system-put 'cp932-unix :mnemonic ?P)
  ;; (coding-system-put 'cp932-mac :mnemonic ?P)
#+end_src

* æ–‡èŠ¸çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°

#' = function
- [[http://www.gnu.org/software/emacs/manual/html_node/elisp/Anonymous-Functions.html][Anonymous Functions - GNU Emacs Lisp Reference Manual]]

[[http://orgmode.org/worg/org-contrib/babel/intro.html#literate-programming][Babel: Introduction]]

Following codes do not work well in org-mode runing with C-c C-c.

#+begin_src emacs-lisp
  (setq dot-file-dir (file-name-directory
		       (or (buffer-file-name) load-file-name)))
  (setq org-file-dir (expand-file-name "plugins-enabled" dot-file-dir))
  (mapc #'org-babel-load-file (directory-files org-file-dir t "\\.org$"))
#+end_src

* å¾Œå‡¦ç†
** å®Œäº†è¡¨ç¤º

#+begin_src emacs-lisp
  (message "%s" "%% init.elã¯å®Œäº†ã—ã¾ã—ãŸ %%")
#+end_src

** ãƒ•ãƒƒã‚¿ã‚³ãƒ¡ãƒ³ãƒˆ
#+begin_src emacs-lisp
  ;;; init.el ends here
#+end_src
